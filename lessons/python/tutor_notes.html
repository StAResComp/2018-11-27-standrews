<!DOCTYPE html>
<html>
<head>
<title>tutor_notes.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
	font-size: 14px;
	padding: 0 12px;
	line-height: 22px;
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}


body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	color: #4080D0;
	text-decoration: none;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
	font-size: inherit;
	line-height: auto;
}

a:hover {
	color: #4080D0;
	text-decoration: underline;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left: 5px solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 14px;
	line-height: 19px;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

.mac code {
	font-size: 12px;
	line-height: 18px;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

/** Theming */

.vscode-light,
.vscode-light pre code {
	color: rgb(30, 30, 30);
}

.vscode-dark,
.vscode-dark pre code {
	color: #DDD;
}

.vscode-high-contrast,
.vscode-high-contrast pre code {
	color: white;
}

.vscode-light code {
	color: #A31515;
}

.vscode-dark code {
	color: #D7BA7D;
}

.vscode-light pre:not(.hljs),
.vscode-light code > div {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre:not(.hljs),
.vscode-dark code > div {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre:not(.hljs),
.vscode-high-contrast code > div {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

.vscode-light blockquote,
.vscode-dark blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.vscode-high-contrast blockquote {
	background: transparent;
	border-color: #fff;
}
</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family:  "Meiryo", "Segoe WPC", "Segoe UI", "SFUIText-Light", "HelveticaNeue-Light", sans-serif, "Droid Sans Fallback";
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

</head>
<body>
<h1 id="2018-11-27-python-lesson-tutor-notes">2018-11-27 Python lesson tutor notes</h1>
<p>These notes are intended for the tutor as they work through the material, but may be useful for independent learning.</p>
<h1 id="start-the-slides">Start the slides</h1>
<!-- TOC -->
<ul>
<li><a href="#2018-11-27-python-lesson-tutor-notes">2018-11-27 Python lesson tutor notes</a></li>
<li><a href="#start-the-slides">Start the slides</a>
<ul>
<li><a href="#title-building-programs-with-python-part-1">TITLE: Building Programs With Python (Part 1)</a></li>
<li><a href="#section-01-setup">SECTION 01: Setup</a></li>
<li><a href="#section-02-getting-started">SECTION 02: Getting Started</a></li>
<li><a href="#section-03-data-analysis">SECTION 03: Data Analysis</a></li>
<li><a href="#section-04-visualisation">SECTION 04: Visualisation</a></li>
<li><a href="#section-05-for-loops">SECTION 05: <code>for</code> loops</a></li>
<li><a href="#section-06-lists">SECTION 06: <code>list</code>s</a></li>
<li><a href="#section-07-making-choices">SECTION 07: Making choices</a></li>
<li><a href="#section-08-analysing-multiple-files">SECTION 08: Analysing multiple files</a></li>
<li><a href="#section-09-conclusions-part-1">SECTION 09: Conclusions (Part 1)</a></li>
<li><a href="#title-building-programs-with-python-part-2">TITLE: Building Programs With Python (Part 2)</a></li>
<li><a href="#section-10-jupyter-notebooks">SECTION 10: <code>Jupyter</code> notebooks</a></li>
<li><a href="#section-11-functions">SECTION 11: Functions</a></li>
<li><a href="#section-12-refactoring">SECTION 12: Refactoring</a></li>
<li><a href="#section-13-command-line-programs">SECTION 13: Command-line programs</a></li>
<li><a href="#section-14-testing-and-documentation">SECTION 14: Testing and documentation</a></li>
<li><a href="#section-15-errors">SECTION 15: Errors</a></li>
<li><a href="#section-16-defensive-programming">SECTION 16: Defensive programming</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<hr>
<h2 id="title-building-programs-with-python-part-1">TITLE: Building Programs With Python (Part 1)</h2>
<hr>
<p><strong>SLIDE:</strong> Etherpad</p>
<ul>
<li>Please use the Etherpad for the course <strong>DEMONSTRATE LINK</strong></li>
</ul>
<hr>
<p><strong>SLIDE:</strong> Why Are We Here?</p>
<ul>
<li>We're here to learn <strong>how to program</strong> (this lesson just happens to be in Python)</li>
<li>This is a way to <strong>solve problems in your research</strong> through making a computer do work <strong>quickly</strong> and <strong>accurately</strong></li>
<li>You'll build <strong>functions</strong> that do specific, defined tasks</li>
<li>You'll <strong>automate</strong> those functions to perform tasks over and over again (in various combinations)</li>
<li>You'll <strong>manipulate data</strong>, which is at the heart of all academia</li>
<li>You'll learn some <strong>file input/output</strong> to make the computer read and write useful information</li>
<li>You'll learn some <strong>data structures</strong>, which are ways to organise data so that the computer can deal with it efficiently</li>
</ul>
<hr>
<p><strong>SLIDE:</strong> XKCD</p>
<ul>
<li>The XKCD comic is tongue-in cheek, but there's a <strong>lot of truth in this</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> How are we doing this?</p>
<ul>
<li>We'll be learning how to program <strong>using Python</strong></li>
<li><strong>Why Python?</strong></li>
<li>We need to use <em>some</em> language</li>
<li>Python is <strong>free</strong>, with <strong>good documentation</strong> and lots of books and online courses.</li>
<li>Python is <strong>widely-used</strong> in academia, and there's lots of support online</li>
<li>It can be <strong>easier for novices</strong> to pick up than other languages</li>
<li><strong>We won't be covering the entire language in detail</strong></li>
<li>For those with a bit more experience, note: <strong>we will be using some long-handed ways of doing things to keep them clear for novices</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> No, I mean &quot;<em>How</em> are we doing this?&quot;</p>
<ul>
<li>We'll use <strong>two tools to write Python</strong></li>
<li>The bulk of the course will be in a <strong>text editor</strong>
<ul>
<li>Text editors are part of the <strong>edit-save-execute</strong> cycle, which is how much code is written</li>
</ul>
</li>
<li>We'll also spend a little bit of time writing code in the <code>Jupyter</code> notebook**
<ul>
<li><code>Jupyter</code> is <strong>good for exploring data, prototyping code, data-wrangling, and teaching</strong></li>
<li>However, it's <strong>not so good for writing &quot;production code&quot;</strong> in a general sense</li>
</ul>
</li>
<li>There are also specialist <strong>integrated development environments (IDEs)</strong> for Python that are extremely useful for developers, but we'll not be using them</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Do I need to use <code>Python</code> afterwards?</p>
<ul>
<li><strong>No.</strong></li>
<li>The lesson and principles are general, we're just teaching in Python</li>
<li>What you learn here will be relevant in other languages</li>
<li>If your field or colleagues use another language in preference, <strong>there may be very good reasons for that</strong>, and they <strong>may be able to offer detailed, relevant support and help to you in that language</strong>. This is valuable.</li>
<li>Language Wars waste everyone's time.</li>
</ul>
<hr>
<p><strong>SLIDE</strong> What are we doing?</p>
<ul>
<li>We're using <strong>a motivating example of data analysis</strong></li>
<li>We've got some data relating to a new treatment for arthritis, and we're going to <strong>explore it.</strong></li>
<li>Data represents patients and <strong>daily measurements of inflammation</strong></li>
<li>We're going to <strong>analyse</strong> the data</li>
<li>We're going to <strong>visualise</strong> the data</li>
<li>We're going to get the computer to do this for us</li>
<li><strong>Automation</strong> is key:
<ul>
<li><strong>fewer human mistakes</strong></li>
<li>easier to <strong>apply to other future datasets</strong></li>
<li>easier to share with others (<strong>transparency</strong>)</li>
</ul>
</li>
<li>We can also <strong>share our code and results</strong> <em>via</em> sites such as GitHub and BitBucket (supplementary information, impact)</li>
</ul>
<hr>
<h2 id="section-01-setup">SECTION 01: Setup</h2>
<hr>
<p><strong>SLIDE</strong> Setting Up - 1 - <strong>DEMO</strong></p>
<ul>
<li>We want a <strong>neat (clean) working environment</strong>: always a good idea when starting a new project - it helps for when you might want to use <code>git</code> to put it under version control, later.</li>
<li><strong>Change directory to desktop</strong> (in terminal or Explorer)</li>
<li><strong>Create directory</strong> <code>python-novice-inflammation</code></li>
<li><strong>Change your working directory</strong> to that directory</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-built_in">cd</span> ~/Desktop
mkdir python-novice-inflammation
<span class="hljs-built_in">cd</span> python-novice-inflammation
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Setting Up - 2 - <strong>DEMO</strong></p>
<ul>
<li>
<p>We need to <strong>download our data</strong> (and also a little code that can help us)</p>
</li>
<li>
<p><strong>Go to Etherpad in browser</strong> <a href="http://pad.software-carpentry.org/2018-11-27-standrews">http://pad.software-carpentry.org/2018-11-27-standrews</a></p>
</li>
<li>
<p><strong>Point out file links</strong> <a href="http://swcarpentry.github.io/python-novice-inflammation/data/python-novice-inflammation-data.zip">http://swcarpentry.github.io/python-novice-inflammation/data/python-novice-inflammation-data.zip</a></p>
</li>
<li>
<p><strong>Click on file links to download</strong></p>
</li>
<li>
<p><strong>Move files</strong> to <code>python-novice-inflammation</code> directory</p>
</li>
<li>
<p><strong>Extract files</strong> - this will create a subdirectory called <code>data</code> in that folder</p>
</li>
<li>
<p><strong>CHECK WHETHER EVERYONE HAS EXTRACTED THE DATA</strong></p>
</li>
</ul>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<h2 id="section-02-getting-started">SECTION 02: Getting Started</h2>
<hr>
<p><strong>SLIDE</strong> <code>Python</code> in the terminal</p>
<ul>
<li>We start the <strong><code>Python</code> console</strong> with the command <code>python</code>
<ul>
<li>This should bring up the interactive console</li>
</ul>
</li>
<li><strong>Explain</strong> header information</li>
<li><strong>Explain</strong> the prompt</li>
</ul>
<pre class="hljs"><code><div>$ python
Python 3.6.3 |Anaconda custom (64-bit)| (default, Oct  6 2017, 12:04:38) 
[GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)] on darwin
Type <span class="hljs-string">"help"</span>, <span class="hljs-string">"copyright"</span>, <span class="hljs-string">"credits"</span> or <span class="hljs-string">"license"</span> <span class="hljs-keyword">for</span> more information.
&gt;&gt;&gt; 
</div></code></pre>
<ul>
<li><strong>CHECK WHETHER EVERYONE HAS STARTED THE CONSOLE</strong></li>
</ul>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> <code>Python</code> REPL</p>
<ul>
<li>You learned about the REPL (read-evaluate-print-loop) in the shell lesson
<ul>
<li><code>Python</code>'s console implements the REPL</li>
</ul>
</li>
<li>We can use <code>Python</code> like a complex calculator</li>
<li><strong>Note the spaces around operators</strong> - good <code>Python</code> style</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">3</span> + <span class="hljs-number">5</span>
<span class="hljs-number">8</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">12</span> / <span class="hljs-number">7</span>
<span class="hljs-number">1.7142857142857142</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">2</span> ** <span class="hljs-number">16</span>
<span class="hljs-number">65536</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">15</span> % <span class="hljs-number">4</span>
<span class="hljs-number">3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>(<span class="hljs-number">2</span> + <span class="hljs-number">4</span>) * (<span class="hljs-number">3</span> - <span class="hljs-number">7</span>)
<span class="hljs-number">-24</span>
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> My first variable</p>
<ul>
<li>
<p>We've seen how to use the REPL</p>
<ul>
<li>To build interesting things, we'll need to store values</li>
<li>We need to work with <strong>variables</strong></li>
</ul>
</li>
<li>
<p>Variables are like <strong>named boxes</strong></p>
<ul>
<li>An item of data goes into the box</li>
<li>When we refer to the box/variable name, we get the <strong>contents of the box</strong></li>
</ul>
</li>
<li>
<p>We need a <strong>variable name</strong></p>
</li>
<li>
<p>We need <strong>variable contents</strong></p>
</li>
<li>
<p><strong>Use a real-life example to hand if possible</strong></p>
</li>
<li>
<p>You can think of a variable as a labelled box, containing a data item</p>
<ul>
<li>Here, we have a box labelled <code>Name</code> - this is the variable name</li>
<li>We've put the value <code>Samia</code> into the box</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE:</strong> Creating a variable</p>
<ul>
<li>
<p>We <strong>assign</strong> a value to a variable with the equals sign: <code>=</code></p>
</li>
<li>
<p>Variable <strong>name goes on the left</strong>, <strong>value on the right</strong></p>
<ul>
<li>Character strings (words etc.) are enclosed in quotes</li>
</ul>
</li>
<li>
<p>After assignment, if we refer to the variable <code>Name</code>, we get the value that's in the box, which is: <code>Samia</code></p>
</li>
<li>
<p>The <strong><code>print()</code></strong> function shows the value of a variable</p>
<ul>
<li><strong>We refer to the name of the variable, and get its contents</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>name = <span class="hljs-string">"Samia"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>name
<span class="hljs-string">'Samia'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(name)
Samia
</div></code></pre>
<ul>
<li><strong>CHECK THAT EVERYONE GETS THE CONCEPT/SEES THE NAME</strong></li>
</ul>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE:</strong> Working with variables</p>
<ul>
<li><strong>Lead the students</strong> through the code:</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>weight_kg = <span class="hljs-number">55</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(weight_kg)
<span class="hljs-number">55</span>
</div></code></pre>
<ul>
<li>Note, we're assigning an integer now (no quotes), but <strong>assignment is the same for all data items</strong></li>
<li>Print <code>weight_kg</code> to see its value</li>
<li><strong>Variables can be substituted by name wherever a value would go</strong>, in calculations for example</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-number">2.2</span> * weight_kg
<span class="hljs-number">121.00000000000001</span>
</div></code></pre>
<ul>
<li>
<p>People may ask about floating point representations here - an introduction is at <a href="https://docs.python.org/3/tutorial/floatingpoint.html">https://docs.python.org/3/tutorial/floatingpoint.html</a> - this is on the Etherpad.</p>
</li>
<li>
<p>The <code>print()</code> function will <strong>take more than one argument</strong>, separated by commas, and print them</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"weight in pounds"</span>, <span class="hljs-number">2.2</span> * weight_kg)
weight <span class="hljs-keyword">in</span> pounds <span class="hljs-number">121.00000000000001</span>
</div></code></pre>
<ul>
<li><strong>Reassigning</strong> to the same variable overwrites the old value</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>weight_kg = <span class="hljs-number">57.5</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"weight in kilograms is now:"</span>, weight_kg)
weight <span class="hljs-keyword">in</span> kilograms <span class="hljs-keyword">is</span> now: <span class="hljs-number">57.5</span>
</div></code></pre>
<ul>
<li>Changing the value of one variable <strong>does not automatically change</strong> the values of other defined variables</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>weight_lb = <span class="hljs-number">2.2</span> * weight_kg
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'weight in kilograms:'</span>, weight_kg, <span class="hljs-string">'and in pounds:'</span>, weight_lb)
weight <span class="hljs-keyword">in</span> kilograms: <span class="hljs-number">57.5</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">in</span> pounds: <span class="hljs-number">126.50000000000001</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>weight_kg = <span class="hljs-number">100</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'weight in kilograms:'</span>, weight_kg, <span class="hljs-string">'and in pounds:'</span>, weight_lb)
weight <span class="hljs-keyword">in</span> kilograms: <span class="hljs-number">100</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">in</span> pounds: <span class="hljs-number">126.50000000000001</span>
</div></code></pre>
<ul>
<li>Although we changed the value in <code>weight_kg</code>, <strong><code>weight_lb</code> did not change</strong> when we did so</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Exercise 01 (5min)</p>
<ul>
<li><strong>PUT THE EXERCISE SLIDE ON SCREEN</strong></li>
</ul>
<p><strong>MCQ: put up four colours of sticky notes</strong></p>
<ul>
<li>The solution is <code>2</code></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Exercise 03 (5min)</p>
<p><strong>MCQ: put up four colours of sticky notes</strong></p>
<ul>
<li>The code prints <code>Hopper Grace</code></li>
</ul>
<hr>
<h2 id="section-03-data-analysis">SECTION 03: Data Analysis</h2>
<hr>
<p><strong>SLIDE</strong> Examine the data</p>
<ul>
<li>
<p><strong>SHOW THE TERMINAL ON SCREEN</strong></p>
</li>
<li>
<p>In the terminal (<code>head</code> was used this morning)</p>
</li>
<li>
<p><strong>Exit <code>Python</code> first!</strong></p>
<ul>
<li><code>Ctrl-D</code></li>
<li><code>quit()</code></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ head data/inflammation-01.csv 
</div></code></pre>
<ul>
<li>
<p><strong>Describe the data</strong>: plain text, csv format</p>
</li>
<li>
<p><strong>Can you tell what the data is?</strong> (i.e. is this good practice for sharing data?)</p>
<ul>
<li>One row per patient</li>
<li>One column per day</li>
<li>Values separated by commas</li>
</ul>
</li>
<li>
<p><strong>State that we'll use the <code>numpy</code> library</strong> to work with this in Python</p>
</li>
<li>
<p><strong>WE WANT TO FIND SUMMARY INFORMATION ABOUT INFLAMMATION BY PATIENT AND BY DAY</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>Python</code> libraries</p>
<ul>
<li>
<p>Most programming languages have <strong>libraries</strong> (also known as <strong>modules</strong>, or <strong>packages</strong>).</p>
<ul>
<li><strong>Libraries contain code that's not in the main language</strong> but is useful for something specific - they can define <strong>functions</strong>, <strong>data types</strong>, and whole programs</li>
<li><strong>Libraries add specific functionality to the language</strong> - you import as many as you neeed</li>
</ul>
</li>
<li>
<p><code>Python</code> has libraries for many types of work and operations</p>
<ul>
<li><strong>In <code>Python</code>, we call on libraries with the <code>import</code> statement</strong>, when we need them</li>
<li>Importing a library is like getting a new piece of equipment out of the locker and onto the lab bench</li>
</ul>
</li>
<li>
<p>There are several repositories that host <code>Python</code> packages</p>
<ul>
<li><a href="https://pypi.python.org/pypi"><code>PyPI</code></a></li>
<li><a href="https://conda.io/docs/"><code>conda</code></a></li>
</ul>
</li>
<li>
<p><strong>Import and describe libraries</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> numpy
</div></code></pre>
<ul>
<li><code>numpy</code> is a library that provides functions and methods to <strong>work with arrays and matrices</strong>, such as those in your dataset</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Load data from file</p>
<ul>
<li>The <code>numpy</code> library gives us a function called <strong><code>loadtxt()</code> that loads tabular data from a file</strong></li>
<li>To use a <code>function</code> from a <code>library</code>, <strong>the format is usually <code>library.function()</code>: <em>dotted notation</em></strong></li>
<li><strong><code>loadtxt()</code> expects two <em>arguments</em> or <em>parameters</em></strong> - values it needs to know to work</li>
<li>The parameter <code>fname</code> takes the <strong>path to the file we want to load</strong></li>
<li>The parameter <code>delimiter</code> takes the <strong>character that we think separates columns</strong> in that file</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>numpy.loadtxt(fname=<span class="hljs-string">'data/inflammation-01.csv'</span>, delimiter=<span class="hljs-string">','</span>)
array([[ <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>, ...,  <span class="hljs-number">3.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>],
       [ <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">2.</span>, ...,  <span class="hljs-number">1.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>],
       [ <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>, ...,  <span class="hljs-number">2.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>],
       ..., 
       [ <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>, ...,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>],
       [ <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>, ...,  <span class="hljs-number">0.</span>,  <span class="hljs-number">2.</span>,  <span class="hljs-number">0.</span>],
       [ <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>, ...,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">0.</span>]])
</div></code></pre>
<ul>
<li>Here, our function is <code>numpy.loadtxt()</code>, and  <em>Dotted notation</em> tells us that <code>loadtxt()</code> belongs to <code>numpy</code></li>
<li><code>Python</code> will accept <strong>double- or single-quotes</strong> around strings</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Loaded data</p>
<ul>
<li>If we don't ask <code>Python</code> to do anything with the data, it just loads the data, then shows the data to us.</li>
<li>The data display is truncated by default - <em>ellipses</em> (<code>...</code>) show rows and columns that were excluded for space</li>
<li>Significant digits are not shown</li>
<li><strong>NOTE that integers in the file have been converted to floating point numbers</strong></li>
<li><strong>Ask the learners to assign the matrix to a variable called <code>data</code>: MAKE THIS CHANGE IN-PLACE</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>data = numpy.loadtxt(fname=<span class="hljs-string">"data/inflammation-01.csv"</span>, delimiter=<span class="hljs-string">","</span>)
</div></code></pre>
<ul>
<li>Now when we execute the cell <strong>we see no output</strong>, but <code>data</code> now contains the array, which we can see by <strong>printing the variable</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(data)
[[ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span> ...,  <span class="hljs-number">3.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span> ...,  <span class="hljs-number">1.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span> ...,  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>]
 ..., 
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span> ...,  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span> ...,  <span class="hljs-number">0.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">0.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span> ...,  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">0.</span>]]
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> What is our data?</p>
<ul>
<li>We've loaded some data, but <strong>what is it?</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>type(data)
&lt;<span class="hljs-class"><span class="hljs-keyword">class</span> '<span class="hljs-title">numpy</span>.<span class="hljs-title">ndarray</span>'&gt;
</span></div></code></pre>
<ul>
<li><strong><code>Python</code> sees our data as a special <code>type</code>: <code>numpy.ndarray</code></strong></li>
<li>From <em>dotted notation</em> we see that <code>ndarray</code> belongs to (was defined in) the <code>numpy</code> library</li>
<li><code>ndarray</code> stands for &quot;n-dimensional array&quot; - so this is <strong>an n-dimensional array from the <code>numpy</code> library</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Members and attributes</p>
<ul>
<li><strong>Creating our <code>data</code> array created a lot of information, too</strong></li>
<li>We created <strong>information about the array</strong> called <em>attributes</em></li>
<li>This information belongs to <code>data</code> so is <strong>accessed in the same way as a module function</strong>, through <em>dotted notation</em></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(data.dtype)
float64
<span class="hljs-meta">&gt;&gt;&gt; </span>print(data.shape)
(<span class="hljs-number">60</span>, <span class="hljs-number">40</span>)
</div></code></pre>
<ul>
<li><code>print(data.dtype)</code> tells us that the <strong>data type for values in the array</strong> is: 64-bit floating point numbers</li>
<li><code>print(data.shape)</code> tells us that there are <strong>60 rows and 40 columns</strong> in the dataset</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Indexing arrays</p>
<ul>
<li>
<p>We often want to work with subsets of data</p>
<ul>
<li>individual rows and columns</li>
<li>subgroups of rows and columns</li>
<li><strong>individual patients</strong> (rows)</li>
<li><strong>individual days</strong> (columns)</li>
</ul>
</li>
<li>
<p>Arrays are indexed by <em>row</em> and <em>column</em>, using <em>square bracket</em> notation</p>
</li>
<li>
<p>To get a single element from the array, <strong>index using <em>square bracket</em> notation</strong> - row first, then column</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>data[<span class="hljs-number">10</span>, <span class="hljs-number">10</span>]
<span class="hljs-number">5.0</span>
</div></code></pre>
<ul>
<li>In <strong><code>Python</code> we index from zero</strong>, so the first element is <code>data[0, 0]</code></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'first value in data:'</span>, data[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>])
first value <span class="hljs-keyword">in</span> data: <span class="hljs-number">0.0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'middle value in data:'</span>, data[<span class="hljs-number">30</span>, <span class="hljs-number">20</span>])
middle value <span class="hljs-keyword">in</span> data: <span class="hljs-number">13.0</span>
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> Slicing arrays</p>
<ul>
<li>To get a section from the array, index using <em>square bracket</em> notation - but specify start and end points, separated by a colon</li>
<li>The slice <code>0:4</code> means start at index zero and go up to, but not including, index 4. So it takes elements <code>0, 1, 2, 3</code> (four elements)</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(data[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>, <span class="hljs-number">0</span>:<span class="hljs-number">10</span>])
[[ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">7.</span>  <span class="hljs-number">8.</span>  <span class="hljs-number">3.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">6.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">9.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">7.</span>]]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(data[<span class="hljs-number">5</span>:<span class="hljs-number">10</span>, <span class="hljs-number">0</span>:<span class="hljs-number">10</span>])
[[ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">4.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">8.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">3.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">8.</span>]
 [ <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">5.</span>  <span class="hljs-number">8.</span>]]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(data[<span class="hljs-number">2</span>:<span class="hljs-number">4</span>, <span class="hljs-number">2</span>:<span class="hljs-number">4</span>])
[[ <span class="hljs-number">1.</span>  <span class="hljs-number">3.</span>]
 [ <span class="hljs-number">2.</span>  <span class="hljs-number">0.</span>]]
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> More slices, please!</p>
<ul>
<li>
<p>If we don't specify a start for the slice, <code>Python</code> assumes the first element is meant (element zero)</p>
</li>
<li>
<p>If we don't specify an end for the slice, <code>Python</code> assumes the last element is meant</p>
</li>
<li>
<p>To get the top-right corner of the array, we can specify <code>data[:3, 36:]</code></p>
</li>
<li>
<p><strong>Explain <code>\n</code></strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>small = data[:<span class="hljs-number">3</span>, <span class="hljs-number">36</span>:]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'small is:\n'</span>, small)
small <span class="hljs-keyword">is</span>:
 [[ <span class="hljs-number">2.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>]
 [ <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>]
 [ <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>]]
</div></code></pre>
<ul>
<li><strong>QUESTION: What does <code>:</code> on its own mean?</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(data[<span class="hljs-number">0</span>:<span class="hljs-number">2</span>, :])
[[  <span class="hljs-number">0.</span>   <span class="hljs-number">0.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">2.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">7.</span>   <span class="hljs-number">8.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">3.</span>  <span class="hljs-number">10.</span>   <span class="hljs-number">5.</span>
    <span class="hljs-number">7.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">7.</span>   <span class="hljs-number">7.</span>  <span class="hljs-number">12.</span>  <span class="hljs-number">18.</span>   <span class="hljs-number">6.</span>  <span class="hljs-number">13.</span>  <span class="hljs-number">11.</span>  <span class="hljs-number">11.</span>   <span class="hljs-number">7.</span>   <span class="hljs-number">7.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">6.</span>
    <span class="hljs-number">8.</span>   <span class="hljs-number">8.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">5.</span>   <span class="hljs-number">7.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">2.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">0.</span>   <span class="hljs-number">0.</span>]
 [  <span class="hljs-number">0.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">2.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">2.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">2.</span>   <span class="hljs-number">2.</span>   <span class="hljs-number">6.</span>  <span class="hljs-number">10.</span>  <span class="hljs-number">11.</span>   <span class="hljs-number">5.</span>   <span class="hljs-number">9.</span>
    <span class="hljs-number">4.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">7.</span>  <span class="hljs-number">16.</span>   <span class="hljs-number">8.</span>   <span class="hljs-number">6.</span>  <span class="hljs-number">18.</span>   <span class="hljs-number">4.</span>  <span class="hljs-number">12.</span>   <span class="hljs-number">5.</span>  <span class="hljs-number">12.</span>   <span class="hljs-number">7.</span>  <span class="hljs-number">11.</span>   <span class="hljs-number">5.</span>
   <span class="hljs-number">11.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">3.</span>   <span class="hljs-number">5.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">4.</span>   <span class="hljs-number">5.</span>   <span class="hljs-number">5.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">1.</span>   <span class="hljs-number">0.</span>   <span class="hljs-number">1.</span>]]
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Exercise 03</p>
<p><strong>MCQ: put up four colours of sticky notes</strong></p>
<ul>
<li>The value is <code>oxyg</code>, number <code>1</code></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Array operations</p>
<ul>
<li>Arithmetic operations on <code>array</code>s are <strong>performed elementwise.</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>doubledata = data * <span class="hljs-number">2.0</span>
</div></code></pre>
<ul>
<li>This operation multiplies every array element by 2.0.</li>
<li><strong>Look at the top right corner of the original array</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"original:\n"</span>, data[:<span class="hljs-number">3</span>, <span class="hljs-number">36</span>:])
original:
 [[ <span class="hljs-number">2.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>]
 [ <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">1.</span>]
 [ <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">1.</span>  <span class="hljs-number">1.</span>]]
</div></code></pre>
<ul>
<li><strong>Look at the top right corner of the doubled array</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"doubledata:\n"</span>, doubledata[:<span class="hljs-number">3</span>, <span class="hljs-number">36</span>:])
doubledata:
 [[ <span class="hljs-number">4.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>]
 [ <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">2.</span>]
 [ <span class="hljs-number">4.</span>  <span class="hljs-number">4.</span>  <span class="hljs-number">2.</span>  <span class="hljs-number">2.</span>]]
 &gt;&gt;&gt; tripledata = doubledata + data
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"tripledata:\n"</span>, tripledata[:<span class="hljs-number">3</span>, <span class="hljs-number">36</span>:])
tripledata:
 [[ <span class="hljs-number">6.</span>  <span class="hljs-number">9.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">0.</span>]
 [ <span class="hljs-number">3.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">0.</span>  <span class="hljs-number">3.</span>]
 [ <span class="hljs-number">6.</span>  <span class="hljs-number">6.</span>  <span class="hljs-number">3.</span>  <span class="hljs-number">3.</span>]]
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>numpy</code> functions</p>
<ul>
<li><code>numpy</code> provides functions that can perform <em>more complex</em> operations on arrays</li>
<li>Some of the <strong><code>numpy</code> operations include statistical summaries: <code>.mean()</code>, <code>.min()</code>, <code>.max()</code> etc.</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(numpy.mean(data))
<span class="hljs-number">6.14875</span>
</div></code></pre>
<ul>
<li>
<p>We can asssign the output from these functions to variables</p>
</li>
<li>
<p><strong>By default, these functions give summaries of the whole array</strong></p>
</li>
<li>
<p><strong>Introduce multiple assignment on one line, or use three lines</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>maxval, minval, stdval = numpy.max(data), numpy.min(data), numpy.std(data)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'maximum inflammation:'</span>, maxval)
maximum inflammation: <span class="hljs-number">20.0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'minimum inflammation:'</span>, minval)
minimum inflammation: <span class="hljs-number">0.0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'standard deviation:'</span>, stdval)
standard deviation: <span class="hljs-number">4.61383319712</span>
</div></code></pre>
<ul>
<li>These functions can also be <strong>applied directly to arrays</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>maxval, minval, stdval = data.max(), data.min(), data.std()
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'maximum inflammation:'</span>, maxval)
maximum inflammation: <span class="hljs-number">20.0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'minimum inflammation:'</span>, minval)
minimum inflammation: <span class="hljs-number">0.0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'standard deviation:'</span>, stdval)
standard deviation: <span class="hljs-number">4.61383319712</span>
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> Summary for one patient</p>
<ul>
<li><strong>What if we want to get summaries patient-by-patient (row-by-row)?</strong></li>
<li>We can extract a single row into a <em>temporary variable</em>, and calculate the mean for that variable</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>patient_0 = data[<span class="hljs-number">0</span>, :] <span class="hljs-comment"># temporary variable</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'maximum inflammation for patient 0:'</span>, patient_0.max())
maximum inflammation <span class="hljs-keyword">for</span> patient <span class="hljs-number">0</span>: <span class="hljs-number">18.0</span>
</div></code></pre>
<ul>
<li>
<p><strong>NOTE: that comments are preceded with a hash <code>#</code> and can be placed after a line of code</strong></p>
</li>
<li>
<p><strong>EXPLAIN: why leaving comments is good (can do that in all code - not just Jupyter notebooks)</strong></p>
</li>
<li>
<p>We can also <strong>apply the <code>numpy</code> function directly</strong>, without creating a variable</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'maximum inflammation for patient 0:'</span>, numpy.max(data[<span class="hljs-number">0</span>, :]))
maximum inflammation <span class="hljs-keyword">for</span> patient <span class="hljs-number">0</span>: <span class="hljs-number">18.0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'maximum inflammation for patient 2:'</span>, numpy.max(data[<span class="hljs-number">2</span>, :]))
maximum inflammation <span class="hljs-keyword">for</span> patient <span class="hljs-number">2</span>: <span class="hljs-number">19.0</span>
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Summary for all patients</p>
<ul>
<li>
<p>But <strong>what if we want to know about all patients at once?</strong></p>
</li>
<li>
<p>Or <strong>what if we want an average inflammation per day?</strong></p>
</li>
<li>
<p>Writing one line per row, or per column, is likely to lead to mistakes and typos</p>
<ul>
<li><strong>We can specify which axis a function applies to</strong></li>
</ul>
</li>
<li>
<p>Specifying <code>axis=0</code> makes the function work on columns (days)</p>
<ul>
<li><strong>working on values 'by' row/row-wise</strong></li>
</ul>
</li>
<li>
<p>Specifying <code>axis=1</code> makes the function work on rows (patients)</p>
<ul>
<li><strong>working on values 'by' column/column-wise</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>numpy</code> operations on axes</p>
<ul>
<li><strong><code>numpy</code> functions take an <code>axis=</code> parameter</strong> which controls the axis for summary statistic calculations.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(numpy.max(data, axis=<span class="hljs-number">1</span>))
[ <span class="hljs-number">18.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">20.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">17.</span>
  <span class="hljs-number">18.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">15.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">20.</span>  <span class="hljs-number">17.</span>
  <span class="hljs-number">16.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">15.</span>  <span class="hljs-number">15.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">18.</span>
  <span class="hljs-number">16.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">15.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">14.</span>  <span class="hljs-number">20.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">15.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">16.</span>  <span class="hljs-number">17.</span>  <span class="hljs-number">19.</span>  <span class="hljs-number">18.</span>  <span class="hljs-number">18.</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(data.mean(axis=<span class="hljs-number">0</span>))
[  <span class="hljs-number">0.</span>           <span class="hljs-number">0.45</span>         <span class="hljs-number">1.11666667</span>   <span class="hljs-number">1.75</span>         <span class="hljs-number">2.43333333</span>   <span class="hljs-number">3.15</span>
   <span class="hljs-number">3.8</span>          <span class="hljs-number">3.88333333</span>   <span class="hljs-number">5.23333333</span>   <span class="hljs-number">5.51666667</span>   <span class="hljs-number">5.95</span>         <span class="hljs-number">5.9</span>
   <span class="hljs-number">8.35</span>         <span class="hljs-number">7.73333333</span>   <span class="hljs-number">8.36666667</span>   <span class="hljs-number">9.5</span>          <span class="hljs-number">9.58333333</span>
  <span class="hljs-number">10.63333333</span>  <span class="hljs-number">11.56666667</span>  <span class="hljs-number">12.35</span>        <span class="hljs-number">13.25</span>        <span class="hljs-number">11.96666667</span>
  <span class="hljs-number">11.03333333</span>  <span class="hljs-number">10.16666667</span>  <span class="hljs-number">10.</span>           <span class="hljs-number">8.66666667</span>   <span class="hljs-number">9.15</span>         <span class="hljs-number">7.25</span>
   <span class="hljs-number">7.33333333</span>   <span class="hljs-number">6.58333333</span>   <span class="hljs-number">6.06666667</span>   <span class="hljs-number">5.95</span>         <span class="hljs-number">5.11666667</span>   <span class="hljs-number">3.6</span>
   <span class="hljs-number">3.3</span>          <span class="hljs-number">3.56666667</span>   <span class="hljs-number">2.48333333</span>   <span class="hljs-number">1.5</span>          <span class="hljs-number">1.13333333</span>
   <span class="hljs-number">0.56666667</span>]
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<h2 id="section-04-visualisation">SECTION 04: Visualisation</h2>
<hr>
<p><strong>SLIDE</strong> Visualisation</p>
<blockquote>
<p>&quot;The purpose of computing is insight, not numbers&quot; - Richard Hamming</p>
</blockquote>
<ul>
<li>The best way to gain insight is often to visualise data.</li>
<li>Visualisation is a large topic that deserves more attention
<ul>
<li><strong>We're just scratching the surface, here</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Graphics package <code>matplotlib</code></p>
<ul>
<li><code>matplotlib</code> is the <em>de facto</em> standard/base plotting library in <code>Python</code></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> matplotlib.pyplot
</div></code></pre>
<ul>
<li>We use <code>matplotlib.pyplot</code> to make the interaction a bit more like <code>matlab</code></li>
</ul>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> <code>matplotlib.pyplot.imshow()</code></p>
<ul>
<li>The <code>.imshow()</code> function <strong>converts matrix values into an image</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>image = matplotlib.pyplot.imshow(data)
<span class="hljs-meta">&gt;&gt;&gt; </span>matplotlib.pyplot.show()
</div></code></pre>
<ul>
<li>
<p>Here, small values are blue, and large values are yellow (<strong>you can change this colour scheme with other settings…</strong>)</p>
</li>
<li>
<p>From the image, we can see <strong>inflammation rising and falling</strong> over a 40-day period for all patients.</p>
</li>
<li>
<p><strong>QUESTION: does this look reasonable?</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>matplotlib.pyplot.plot()</code></p>
<ul>
<li><strong><code>.plot()</code> shows a conventional line graph</strong></li>
<li>We're going to use it to <strong>plot the average inflammation level on each day of the study</strong></li>
<li>We'll create the variable <code>ave_inflammation</code> and use <code>numpy.mean()</code> on axis <code>0</code> of the data</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>ave_inflammation = numpy.mean(data, axis=<span class="hljs-number">0</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>ave_plot = matplotlib.pyplot.plot(ave_inflammation)
<span class="hljs-meta">&gt;&gt;&gt; </span>matplotlib.pyplot.show()
</div></code></pre>
<ul>
<li><strong>NOTE: ask students if the data looks reasonable?</strong>
<ul>
<li>The <strong>data does not look reasonable</strong>. Biologically, we expect a sharp rise in inflammation, followed by a slow tail-off</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Investigating data</p>
<ul>
<li>Since <strong>our plot of <code>.mean()</code> values looks artificial, let's check on other statistics</strong> to see if we can see what's going on.</li>
<li>We'll plot the maximum value by day</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>max_plot = matplotlib.pyplot.plot(numpy.max(data, axis=<span class="hljs-number">0</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>matplotlib.pyplot.show()
</div></code></pre>
<ul>
<li><strong>NOTE we're not defining a variable, this time</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>min_plot = matplotlib.pyplot.plot(numpy.min(data, axis=<span class="hljs-number">0</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>matplotlib.pyplot.show()
</div></code></pre>
<ul>
<li>
<p><strong>Ask students if the data looks reasonable?</strong></p>
<ul>
<li>The data looks very artificial. The maxima are completely smooth, but the minima are a
step function.</li>
</ul>
</li>
<li>
<p><strong>NOTE: we would not have noticed this without visualisation</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Exercise 04 (5min)</p>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>std_plot = matplotlib.pyplot.plot(numpy.std(data, axis=<span class="hljs-number">0</span>))
<span class="hljs-meta">&gt;&gt;&gt; </span>matplotlib.pyplot.show()
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> FIGURES AND SUBPLOTS</p>
<p><strong>WE'RE WORKING IN A SCRIPT FOR THE FIRST TIME</strong></p>
<ul>
<li><strong>Exit <code>Python</code></strong></li>
<li><strong>Open a new script called <code>subplots.py</code></strong></li>
</ul>
<pre class="hljs"><code><div>$ nano subplots.py
</div></code></pre>
<ul>
<li>
<p><strong>You're now in the <code>nano</code> editor</strong></p>
</li>
<li>
<p>We write the <code>Python</code> code here, then save it, exit, and run it with <code>python subplots.py</code>.</p>
</li>
<li>
<p><strong>DESCRIBE SCRIPT</strong></p>
</li>
<li>
<p>First we <strong>import packages</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy
<span class="hljs-keyword">import</span> matplotlib.pyplot
</div></code></pre>
<ul>
<li>Next we <strong>load data</strong>
<ul>
<li>Comments tell us why/what we are doing</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Load inflammation data</span>
data = numpy.loadtxt(fname=<span class="hljs-string">'data/inflammation-01.csv'</span>, delimiter=<span class="hljs-string">','</span>)
</div></code></pre>
<ul>
<li>We can put all three plots we just drew into a single figure</li>
<li>To do this, we use <code>matplotlib</code> to <strong>create a figure</strong>, and put it in a variable called <code>fig</code>
<ul>
<li>the <code>figsize</code> argument sets the <code>(width, height)</code> of the figure in inches</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Create a figure</span>
fig = matplotlib.pyplot.figure(figsize=(<span class="hljs-number">10.0</span>, <span class="hljs-number">3.0</span>))
</div></code></pre>
<ul>
<li>We then <strong>create three <em>axes</em></strong>
<ul>
<li>these are the variables that hold the individual plots</li>
<li>one axis per plot</li>
</ul>
</li>
<li>Using the <code>.add_subplot()</code> function, we need to specify three things:
-* number of rows, number of columns, which cell this figure goes into
<ul>
<li><strong>THIS NEEDS TO BE DRAWN OUT ON THE BOARD</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Add subplots for statistical summaries</span>
axes1 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>) 
axes2 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
axes3 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)
</div></code></pre>
<ul>
<li>Once we've created our plot axes, we can add labels and plots to each of them in turn</li>
<li>Plot axes properties are usually changed using the <code>.set_&lt;something&gt;()</code> syntax
<ul>
<li>Here we're changing only the label on the <em>y</em>-axis</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Add y-axis label to each subplot</span>
axes1.set_ylabel(<span class="hljs-string">'average'</span>)
axes2.set_ylabel(<span class="hljs-string">'max'</span>)
axes3.set_ylabel(<span class="hljs-string">'min'</span>)
</div></code></pre>
<ul>
<li>We can plot on an axis by using its <code>.plot()</code> function
<ul>
<li>As before, we can pass the output from the <code>numpy.max()</code> function directly</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Plot the summary data</span>
axes1.plot(numpy.mean(data, axis=<span class="hljs-number">0</span>))
axes2.plot(numpy.max(data, axis=<span class="hljs-number">0</span>))
axes3.plot(numpy.min(data, axis=<span class="hljs-number">0</span>))
</div></code></pre>
<ul>
<li>We'll tighten up the presentation by using <code>fig.tight_layout()</code>
<ul>
<li>this is a function that moves the axes until they are visually pleasing.</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Tidy the figure</span>
fig.tight_layout()
</div></code></pre>
<ul>
<li>Finally, we'll show the figure in the interactive window</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Show figure in the interactive window</span>
matplotlib.pyplot.show()
</div></code></pre>
<ul>
<li>
<p><strong>Write the file</strong></p>
</li>
<li>
<p><strong>Save the file</strong></p>
</li>
<li>
<p><strong>Exit to terminal</strong></p>
</li>
<li>
<p>Now we run the script with <code>python subplots.py</code></p>
</li>
</ul>
<pre class="hljs"><code><div>$ python subplots.py
</div></code></pre>
<ul>
<li><strong>This is the most demanding code you have written, so far! ROUND OF APPLAUSE FOR YOURSELVES!</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Exercise 05 (5min)</p>
<ul>
<li>
<p>Note that it helps to change <code>figsize</code></p>
</li>
<li>
<p>Otherwise the only change is in <code>add_subplot()</code></p>
</li>
<li>
<p><code>cp</code> the file to prepare for a new script</p>
</li>
</ul>
<pre class="hljs"><code><div>$ cp subplots.py exercise_05.py
$ nano exercise_05.py
</div></code></pre>
<ul>
<li>New script:</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy
<span class="hljs-keyword">import</span> matplotlib.pyplot

<span class="hljs-comment"># Load inflammation data</span>
data = numpy.loadtxt(fname=<span class="hljs-string">'data/inflammation-01.csv'</span>, delimiter=<span class="hljs-string">','</span>)

<span class="hljs-comment"># Create a figure</span>
fig = matplotlib.pyplot.figure(figsize=(<span class="hljs-number">3.0</span>, <span class="hljs-number">10.0</span>))

<span class="hljs-comment"># Add subplots for statistical summaries</span>
axes1 = fig.add_subplot(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
axes2 = fig.add_subplot(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
axes3 = fig.add_subplot(<span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)

<span class="hljs-comment"># Add y-axis label to each subplot</span>
axes1.set_ylabel(<span class="hljs-string">'average'</span>)
axes2.set_ylabel(<span class="hljs-string">'max'</span>)
axes3.set_ylabel(<span class="hljs-string">'min'</span>)

<span class="hljs-comment"># Plot the summary data</span>
axes1.plot(numpy.mean(data, axis=<span class="hljs-number">0</span>))
axes2.plot(numpy.max(data, axis=<span class="hljs-number">0</span>))
axes3.plot(numpy.min(data, axis=<span class="hljs-number">0</span>))

<span class="hljs-comment"># Tidy the figure</span>
fig.tight_layout()

<span class="hljs-comment"># Show figure in the interactive window</span>
matplotlib.pyplot.show()
</div></code></pre>
<ul>
<li>Execute script</li>
</ul>
<pre class="hljs"><code><div>$ python subplots.py
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<ul>
<li><strong>NOW, TO DO <em>EVEN MORE</em> INTERESTING THINGS, WE NEED TO LEARN A LITTLE MORE ABOUT PROGRAMMING</strong></li>
</ul>
<hr>
<h2 id="section-05-for-loops">SECTION 05: <code>for</code> loops</h2>
<hr>
<p><strong>SLIDE</strong> Motivation</p>
<ul>
<li>We wrote code that plots values of interest from our dataset</li>
<li><strong>BUT</strong> soon we're going to get <strong>dozens of datasets</strong> to analyse</li>
<li>So, we need to tell the computer to <strong>repeat our plots and analysis on each dataset</strong></li>
<li>We're going to do this with <code>for</code> loops</li>
</ul>
<ul>
<li><strong>NOTE: <code>for</code> loops are a fundamental method for program control across nearly every programming language</strong></li>
<li><strong>NOTE: <code>for</code> loops in python work just like those the learners saw in <code>bash</code>, but are syntactically different</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Spelling bee</p>
<ul>
<li>
<p>If we wanted to spell a word, like 'lead' one letter at a time</p>
</li>
<li>
<p><strong>START UP A PYTHON CONSOLE</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>$ python
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>word = <span class="hljs-string">"lead"</span>
</div></code></pre>
<ul>
<li>We could <em>index</em> each letter in turn (just like elements of an array)</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(word[<span class="hljs-number">0</span>])
l
<span class="hljs-meta">&gt;&gt;&gt; </span>print(word[<span class="hljs-number">1</span>])
e
<span class="hljs-meta">&gt;&gt;&gt; </span>print(word[<span class="hljs-number">2</span>])
a
<span class="hljs-meta">&gt;&gt;&gt; </span>print(word[<span class="hljs-number">3</span>])
d
</div></code></pre>
<ul>
<li>But this has some problems - <strong>ASK LEARNERS WHAT PROBLEMS THEY SEE</strong>
<ul>
<li>The <strong>approach doesn't scale</strong> - what if our word is hundreds of letters long?</li>
<li><strong>What if our word is longer than the indices?</strong> We don't get all the data; if it's shorter, we get an error.</li>
<li><strong>demonstrate with <code>oxygen</code> and <code>tin</code> - MODIFY THE WORD IN PLACE</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>word = <span class="hljs-string">"tin"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(word[<span class="hljs-number">3</span>])
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
IndexError: string index out of range
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>for</code> loops</p>
<ul>
<li>
<p><code>for</code> loops perform an operation <strong><em>for</em> every item <em>in</em> a collection</strong></p>
</li>
<li>
<p><strong>NOTE: importance of the <code>tab</code> character and syntactic whitespace</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>word = <span class="hljs-string">"lead"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> word:
<span class="hljs-meta">... </span>    print(char)
<span class="hljs-meta">... </span>
l
e
a
d
</div></code></pre>
<ul>
<li>Why is this better? <strong>ASK THE LEARNERS</strong>
<ul>
<li><strong>It's shorter code</strong> (less opportunity for error)</li>
<li><strong>It's more flexible and robust</strong> - it doesn't matter how long <code>word</code> is, the code will still spell it out one letter at a time</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>word = <span class="hljs-string">"oxygen"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> word:
<span class="hljs-meta">... </span>    print(char)
<span class="hljs-meta">... </span>
o
x
y
g
e
n
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>for</code> loop syntax</p>
<ul>
<li>
<p>The general loop syntax is defined by a <code>for</code> statement, and a <em>code block</em></p>
<ul>
<li>The <code>for</code> loop <strong>statement ends in a colon, <code>:</code></strong></li>
<li>The <em>code block</em> is <strong>indented</strong> with a <code>tab</code> (<code>\t</code>)</li>
</ul>
</li>
<li>
<p><strong>Everything indented immediately below the <code>for</code> statement is part of the <code>for</code> loop</strong></p>
</li>
<li>
<p><strong>There is no command or statement to signify the end of the loop body - only a change in indentation</strong></p>
</li>
<li>
<p>This is quite different from most other languages (and some people hate <code>Python</code> because of it)</p>
</li>
<li>
<p><strong>If further example needed, put the code below in a script</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> word:
    print(char)
    print(<span class="hljs-string">"I'm in the loop"</span>)
    <span class="hljs-comment"># This is a comment</span>
    print(<span class="hljs-string">"Still in the loop"</span>)
    
    print(<span class="hljs-string">"I'm in the loop as well"</span>)
print(<span class="hljs-string">"Not in the loop"</span>)
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Counting with a <code>for</code> loop</p>
<ul>
<li>Code in a <code>for</code> loop can see and modify variables defined outside the loop</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>length = <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> vowel <span class="hljs-keyword">in</span> <span class="hljs-string">'aeiou'</span>:
<span class="hljs-meta">... </span>    length = length + <span class="hljs-number">1</span>
<span class="hljs-meta">... </span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"There are"</span>, length, <span class="hljs-string">"vowels"</span>) 
There are <span class="hljs-number">5</span> vowels
</div></code></pre>
<ul>
<li><strong>Ask the learners what output they expect</strong></li>
<li>Talk through the operations of the loop, if necessary</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>for</code> loop variables</p>
<ul>
<li>The <em>loop variable</em> gets updated once per cycle of the loop</li>
<li>The <em>loop variable</em> also still exists once the loop is finished</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>letter = <span class="hljs-string">"z"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(letter)
z
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> letter <span class="hljs-keyword">in</span> <span class="hljs-string">"abc"</span>:
<span class="hljs-meta">... </span>    print(letter)
<span class="hljs-meta">... </span>
a
b
c
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"after the loop, letter is:"</span>, letter)
after the loop, letter <span class="hljs-keyword">is</span>: c
</div></code></pre>
<ul>
<li><strong>ASK THE LEARNERS WHAT OUTPUT THEY EXPECT</strong>
<ul>
<li>The value of <code>letter</code> is <code>c</code>, the last updated value in the loop - not <code>z</code>, which would be the case if the loop variable only had scope within the loop</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>range()</code></p>
<ul>
<li>The <code>range()</code> function creates a <strong>sequence of numbers.</strong></li>
<li>The sequence depends on the number and value of arguments given</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>seq = range(<span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"Range is:"</span>, seq)
Range <span class="hljs-keyword">is</span>: range(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> seq:
<span class="hljs-meta">... </span>    print(val)
<span class="hljs-meta">... </span>
<span class="hljs-number">0</span>
<span class="hljs-number">1</span>
<span class="hljs-number">2</span>
</div></code></pre>
<ul>
<li><strong>Substitute other ranges and run again</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>seq = range(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"Range is:"</span>, seq)
Range <span class="hljs-keyword">is</span>: range(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> seq:
<span class="hljs-meta">... </span>    print(val)
<span class="hljs-meta">... </span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>seq = range(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"Range is:"</span>, seq)
Range <span class="hljs-keyword">is</span>: range(<span class="hljs-number">3</span>, <span class="hljs-number">10</span>, <span class="hljs-number">3</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> seq:
<span class="hljs-meta">... </span>    print(val)
<span class="hljs-meta">... </span>
<span class="hljs-number">3</span>
<span class="hljs-number">6</span>
<span class="hljs-number">9</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>seq = range(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"Range is:"</span>, seq)
Range <span class="hljs-keyword">is</span>: range(<span class="hljs-number">10</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> val <span class="hljs-keyword">in</span> seq:
<span class="hljs-meta">... </span>    print(val)
<span class="hljs-meta">... </span>
<span class="hljs-number">10</span>
<span class="hljs-number">9</span>
<span class="hljs-number">8</span>
<span class="hljs-number">7</span>
<span class="hljs-number">6</span>
<span class="hljs-number">5</span>
<span class="hljs-number">4</span>
<span class="hljs-number">3</span>
<span class="hljs-number">2</span>
<span class="hljs-number">1</span>
</div></code></pre>
<ul>
<li>
<p>A single value <em>n</em> gives the sequence <code>[0, ..., n-1]</code></p>
</li>
<li>
<p>Two values: <em>m, n</em> gives the sequence <code>[m, ..., n-1]</code></p>
</li>
<li>
<p>Three values: <em>m, n, p</em> gives the sequence <code>[m, m+p, ..., n-1]</code> and skips <code>n-1</code> if it's not in the sequence.</p>
</li>
<li>
<p><strong>NOTE: <code>range()</code> returns a <code>range</code> type that can be iterated over.</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Exercise 06 (5min)</p>
<ul>
<li>Tell learners that you can <strong>add strings</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>instr = <span class="hljs-string">"Newton"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>outstr = <span class="hljs-string">""</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> instr:
<span class="hljs-meta">... </span>    outstr = char + outstr
<span class="hljs-meta">... </span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(outstr)
notweN
</div></code></pre>
<hr>
<h2 id="section-06-lists">SECTION 06: <code>list</code>s</h2>
<hr>
<p><strong>SLIDE</strong> Lists</p>
<ul>
<li>Lists are defined as ordered lists of values
<ul>
<li>enclosed in <strong>square brackets</strong></li>
<li>separated by commas</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>odds = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"odds are:"</span>, odds)
odds are: [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
</div></code></pre>
<ul>
<li>They can be <strong>indexed and sliced</strong>, as seen for arrays</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'first and last:'</span>, odds[<span class="hljs-number">0</span>], odds[<span class="hljs-number">-1</span>])
first <span class="hljs-keyword">and</span> last: <span class="hljs-number">1</span> <span class="hljs-number">7</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(odds[<span class="hljs-number">2</span>:])
[<span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
</div></code></pre>
<ul>
<li>They can be iterated over, in `for' loops</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> odds:
<span class="hljs-meta">... </span>    print(number)
<span class="hljs-meta">... </span>
<span class="hljs-number">1</span>
<span class="hljs-number">3</span>
<span class="hljs-number">5</span>
<span class="hljs-number">7</span>
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Mutability</p>
<ul>
<li>
<p><code>Python</code> has a concept of <strong>mutability</strong>.</p>
<ul>
<li>Items that can be modified in-place are <em>mutable</em>.</li>
<li>Those that can't are <em>immutable</em>.</li>
</ul>
</li>
<li>
<p>Lists are <em>mutable</em>, strings are <em>immutable</em>.</p>
<ul>
<li><code>list</code>s and <code>string</code>s are both sequences, <strong>BUT</strong> you can change the elements in a list, after it is created: <strong>lists are mutable</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>names = [<span class="hljs-string">"Curie"</span>, <span class="hljs-string">"Darwing"</span>, <span class="hljs-string">"Turing"</span>] <span class="hljs-comment"># typo in Darwin's name</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"names is originally:"</span>, names)
names <span class="hljs-keyword">is</span> originally: [<span class="hljs-string">'Curie'</span>, <span class="hljs-string">'Darwing'</span>, <span class="hljs-string">'Turing'</span>]
</div></code></pre>
<ul>
<li><strong>We have a typo - let's correct it</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>names[<span class="hljs-number">1</span>] = <span class="hljs-string">'Darwin'</span>    <span class="hljs-comment"># correct the name</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'final value of names:'</span>, names)
final value of names: [<span class="hljs-string">'Curie'</span>, <span class="hljs-string">'Darwin'</span>, <span class="hljs-string">'Turing'</span>]
</div></code></pre>
<ul>
<li><code>string</code>s are <strong>NOT</strong> mutable</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>name = <span class="hljs-string">"darwin"</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>name[<span class="hljs-number">0</span>] = <span class="hljs-string">"D"</span>
Traceback (most recent call last):
  File <span class="hljs-string">"&lt;stdin&gt;"</span>, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;
TypeError: <span class="hljs-string">'str'</span> object does <span class="hljs-keyword">not</span> support item assignment
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Changer danger</p>
<ul>
<li>
<p><strong>There are risks associated with modifying lists in-place</strong></p>
</li>
<li>
<p>Rather than make copies of lists, when assigned to more than one variable, <code>Python</code> will make <em>reference</em> to the original list</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>your_list = my_list
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"my list:"</span>, my_list)
my list: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>my_list[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>
</div></code></pre>
<ul>
<li><strong>ASK LEARNERS WHAT THEY THINK <code>your_list</code> contains</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"your list:"</span>, your_list)
your list: [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</div></code></pre>
<ul>
<li><strong>If two variables refer to the same list, any changes to that list are reflected in both variables.</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> List copies</p>
<ul>
<li>To avoid this kind of effect:
<ul>
<li>make a <em>copy</em> of a <code>list</code> by <em>slicing</em> it**, or using the <code>list()</code> function that returns a new list</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]           <span class="hljs-comment"># original list</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>your_list = my_list[:]           <span class="hljs-comment"># copy 1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>your_other_list = list(my_list)  <span class="hljs-comment"># copy 2</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"my_list:"</span>, my_list)
my_list: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>my_list[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"my_list:"</span>, my_list)
my_list: [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"your_list:"</span>, your_list)
your_list: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"your_other_list:"</span>, your_list)
your_other_list: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> <code>list</code> functions</p>
<ul>
<li>
<p><strong><code>list</code>s are <code>Python</code> objects and have a number of useful functions (called <em>methods</em>) to modify their contents</strong></p>
</li>
<li>
<p><code>.append()</code> adds a value to the end of the list</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(odds)
[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>odds.append(<span class="hljs-number">9</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"odds after adding a value:"</span>, odds)
odds after adding a value: [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>]
</div></code></pre>
<ul>
<li><code>.reverse()</code> reverses the order of list items <strong>in place</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>odds.reverse()
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"odds after reversing the list:"</span>, odds)
odds after reversing the list: [<span class="hljs-number">9</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>]
</div></code></pre>
<ul>
<li><code>.pop()</code> returns the last item in the list, and removes it from the list</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>odds.pop()
<span class="hljs-number">1</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">"odds after popping:"</span>, odds)
odds after popping: [<span class="hljs-number">9</span>, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>]
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Overloading</p>
<ul>
<li><em>Overloading</em> refers to an <em>operator</em> (e.g. <code>+</code>) having more than one meaning, depending on the thing it operates on.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>vowels = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'u'</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>vowels_welsh = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'u'</span>, <span class="hljs-string">'w'</span>, <span class="hljs-string">'y'</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>print(vowels + vowels_welsh)
[<span class="hljs-string">'a'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'u'</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'e'</span>, <span class="hljs-string">'i'</span>, <span class="hljs-string">'o'</span>, <span class="hljs-string">'u'</span>, <span class="hljs-string">'w'</span>, <span class="hljs-string">'y'</span>]
</div></code></pre>
<ul>
<li>We can add (<code>+</code>) and <strong>even multiply</strong> (<code>*</code>) lists, even though they're not really arithmetic operations
<strong>NOTE: multiplication of lists does not work like multiplication of <code>numpy</code> arrays</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>counts = [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]
<span class="hljs-meta">&gt;&gt;&gt; </span>repeats = counts * <span class="hljs-number">2</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(repeats)
[<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>]
</div></code></pre>
<ul>
<li><strong>Ask the learners what 'multiplication' (<code>*</code>) does for lists</strong></li>
</ul>
<hr>
<p>## SECTION 07: Making choices</p>
<hr>
<p><strong>SLIDE</strong> Conditionals</p>
<ul>
<li>We often want the computer to do <code>&lt;something&gt;</code> <strong><code>if</code></strong> some condition is <strong>true</strong></li>
<li>To do this, we can use an <strong><code>if</code> statement</strong>
<ul>
<li><strong><code>if</code> statements end in a colon (<code>:</code>)</strong></li>
<li><strong>they also have a <em>condition</em></strong> - the <em>condition</em> is evaluated and, if found to be <code>true</code>, the code block is executed</li>
<li>The code block is <em>indented</em> as was the case with the <code>for</code> loop</li>
</ul>
</li>
</ul>
<ul>
<li><strong>This is an almost universal construct in programming languages</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>num = <span class="hljs-number">37</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">100</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'greater'</span>)
<span class="hljs-meta">... </span>
<span class="hljs-meta">&gt;&gt;&gt; </span>num = <span class="hljs-number">149</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">100</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'greater'</span>)
<span class="hljs-meta">... </span>
greater
</div></code></pre>
<ul>
<li><strong>Any condition</strong> that might evaluate to <code>True</code> or <code>False</code> can be used:</li>
<li><strong>SHOW A DIFFERENT TEST</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> <span class="hljs-string">'atlas'</span> == <span class="hljs-string">'atlas'</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">"The same"</span>)
<span class="hljs-meta">... </span>
The same
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>if-else</code> statements</p>
<ul>
<li>
<p><strong>An <code>if</code> statement executes code if the condition evaluates as <code>true</code></strong></p>
<ul>
<li>But <strong>what if the condition evaluates as <code>false</code>?</strong></li>
</ul>
</li>
<li>
<p>The <strong><code>else</code> structure</strong> is like the <code>if</code> structure</p>
<ul>
<li>it <strong>ends in a colon (<code>:</code>)</strong></li>
<li>the <strong>indented code block beneath it executes if the condition is <code>false</code></strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>num = <span class="hljs-number">37</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">100</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'greater'</span>)
<span class="hljs-meta">... </span><span class="hljs-keyword">else</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'not greater'</span>)
<span class="hljs-meta">... </span>
<span class="hljs-keyword">not</span> greater
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Conditional logic</p>
<ul>
<li><strong>OPTIONALLY SHOW THIS SLIDE</strong></li>
</ul>
<ul>
<li>Describe flowchart</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>if-elif-else</code> conditionals</p>
<ul>
<li>We can <strong>chain conditional tests together with <code>elif</code> (short for <code>else if</code>)</strong></li>
<li>The <code>elif</code> statement structure is the same as the <code>if</code> statement structure
<ul>
<li>the indented code block is executed if the condition is true, and <strong>no previous conditions have been met</strong>.</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>num = <span class="hljs-number">-3</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">0</span>:
<span class="hljs-meta">... </span>    print(num, <span class="hljs-string">"is positive"</span>)
<span class="hljs-meta">... </span><span class="hljs-keyword">elif</span> num == <span class="hljs-number">0</span>:
<span class="hljs-meta">... </span>    print(num, <span class="hljs-string">"is zero"</span>)
<span class="hljs-meta">... </span><span class="hljs-keyword">else</span>:
<span class="hljs-meta">... </span>    print(num, <span class="hljs-string">"is negative"</span>)
<span class="hljs-meta">... </span>
<span class="hljs-number">-3</span> <span class="hljs-keyword">is</span> negative
</div></code></pre>
<ul>
<li><strong>NOTE: the test for equality is a double-equals!</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> COMBINING CONDITIONS</p>
<ul>
<li>We can <strong>combine conditions using <em>Boolean Logic</em></strong>
<ul>
<li>Operators include <code>and</code>, <code>or</code> and <code>not</code></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> (<span class="hljs-number">1</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">and</span> (<span class="hljs-number">-1</span> &gt; <span class="hljs-number">0</span>):
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'both parts are true'</span>)
<span class="hljs-meta">... </span><span class="hljs-keyword">else</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'at least one part is false'</span>)
<span class="hljs-meta">... </span>
at least one part <span class="hljs-keyword">is</span> false
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> (<span class="hljs-number">4</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">and</span> (<span class="hljs-number">2</span> &gt; <span class="hljs-number">0</span>):
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'both parts are true'</span>)
<span class="hljs-meta">... </span><span class="hljs-keyword">else</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'at least one part is false'</span>)
<span class="hljs-meta">... </span>
both parts are true
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">if</span> (<span class="hljs-number">4</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (<span class="hljs-number">2</span> &gt; <span class="hljs-number">0</span>):
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'at least one part is true'</span>)
<span class="hljs-meta">... </span><span class="hljs-keyword">else</span>:
<span class="hljs-meta">... </span>    print(<span class="hljs-string">'both parts are false'</span>)
<span class="hljs-meta">... </span>
at least one part <span class="hljs-keyword">is</span> true
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> Exercise 07 (5min)</p>
<ul>
<li>
<p><strong>MCQ: Put up four stickies</strong></p>
</li>
<li>
<p>Solution: <code>C</code></p>
</li>
<li>
<p><strong>NOTE: There are two <code>elif</code>s and no <code>else</code></strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> More operators</p>
<ul>
<li>These are <strong>two operators</strong> you will meet and use frequently
<ul>
<li><code>==</code> <strong>(double-equals) is the equality operator</strong>, and returns <code>True</code> if the left-hand-side value is equal to the right-hand-side value</li>
<li><strong>we've already been using this</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-number">1</span> == <span class="hljs-number">1</span>)
<span class="hljs-keyword">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-number">1</span> ==<span class="hljs-number">2</span>)
<span class="hljs-keyword">False</span>
</div></code></pre>
<ul>
<li><code>in</code> is the <strong>membership operator</strong>, and returns <code>True</code> if the left-hand-side value is in the right-hand-side value (which should be a collection)</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'a'</span> <span class="hljs-keyword">in</span> <span class="hljs-string">'toast'</span>)
<span class="hljs-keyword">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-string">'b'</span> <span class="hljs-keyword">in</span> <span class="hljs-string">'toast'</span>)
<span class="hljs-keyword">False</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-number">1</span> <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
<span class="hljs-keyword">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-number">1</span> <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>))
<span class="hljs-keyword">True</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(<span class="hljs-number">1</span> <span class="hljs-keyword">in</span> range(<span class="hljs-number">2</span>, <span class="hljs-number">10</span>))
<span class="hljs-keyword">False</span>
</div></code></pre>
<hr>
<p>## SECTION 08: Analysing multiple files</p>
<hr>
<p><strong>SLIDE</strong> Analysing multiple files</p>
<ul>
<li>
<p>We have <strong>received several files of data</strong> from the inflammation studies, and we would like to <strong>perform the same operations on each of them</strong>.</p>
</li>
<li>
<p>We have <strong>learned how to open files, read data, visualise data, loop over data, and make decisions</strong> based on that content.</p>
</li>
<li>
<p>We're going to write a new script to do this</p>
<ul>
<li><strong>Exit <code>Python</code> console</strong></li>
<li><strong>Start new script</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ nano analyse_files.py
</div></code></pre>
<ul>
<li>Now we need to know how to <strong>interact with the <em>filesystem</em></strong> to get our data files.</li>
</ul>
<hr>
<p><strong>SLIDE</strong> The <code>os</code> module</p>
<ul>
<li>
<p>To interact with the filesystem, <strong>we need to import the <code>os</code> module</strong></p>
</li>
<li>
<p>This allows us to interact with the filesystem in the same way, regardless of the operating system we work on! <strong>INTEROPERABILITY AND REPRODUCIBILITY</strong></p>
</li>
<li>
<p><strong>Put imports at the top of the script</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> matplotlib.pyplot
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> os
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>os.listdir()</code></p>
<ul>
<li>
<p>The <code>os.listdir()</code> function lists the contents of a directory</p>
</li>
<li>
<p><strong>SAVE AND EXIT SCRIPT</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>$ python
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">import</span> os
<span class="hljs-meta">&gt;&gt;&gt; </span>os.listdir(<span class="hljs-string">'.'</span>)
[<span class="hljs-string">'subplots.py'</span>, <span class="hljs-string">'code'</span>, <span class="hljs-string">'exercise_05.py'</span>, <span class="hljs-string">'analyse_files.py'</span>, <span class="hljs-string">'data'</span>]
</div></code></pre>
<p>Our data is in the <code>'data'</code> directory</p>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>os.listdir(<span class="hljs-string">'data'</span>)
[<span class="hljs-string">'inflammation-05.csv'</span>, <span class="hljs-string">'inflammation-11.csv'</span>, <span class="hljs-string">'inflammation-10.csv'</span>, <span class="hljs-string">'inflammation-04.csv'</span>, <span class="hljs-string">'inflammation-12.csv'</span>, <span class="hljs-string">'inflammation-06.csv'</span>, <span class="hljs-string">'inflammation-07.csv'</span>, <span class="hljs-string">'inflammation-03.csv'</span>, <span class="hljs-string">'small-02.csv'</span>, <span class="hljs-string">'small-03.csv'</span>, <span class="hljs-string">'inflammation-02.csv'</span>, <span class="hljs-string">'small-01.csv'</span>, <span class="hljs-string">'inflammation-01.csv'</span>, <span class="hljs-string">'inflammation-09.csv'</span>, <span class="hljs-string">'inflammation-08.csv'</span>]
</div></code></pre>
<ul>
<li><strong>We only want <code>inflammation</code> data</strong> so we would like to ignore the <code>small</code> files
<ul>
<li>We want to turn the list from <code>os.listdir()</code> into a list that contains only <code>inflammation*</code> files: <strong>use <code>for</code> loop and <code>if</code> to filter</strong></li>
<li>The list can be filtered with a <code>for</code> loop or <em>list comprehension</em></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">'data'</span>):
<span class="hljs-meta">... </span>    <span class="hljs-keyword">if</span> <span class="hljs-string">'inflammation'</span> <span class="hljs-keyword">in</span> file:
<span class="hljs-meta">... </span>            print(file)
<span class="hljs-meta">... </span>
inflammation<span class="hljs-number">-05.</span>csv
inflammation<span class="hljs-number">-11.</span>csv
inflammation<span class="hljs-number">-10.</span>csv
inflammation<span class="hljs-number">-04.</span>csv
inflammation<span class="hljs-number">-12.</span>csv
inflammation<span class="hljs-number">-06.</span>csv
inflammation<span class="hljs-number">-07.</span>csv
inflammation<span class="hljs-number">-03.</span>csv
inflammation<span class="hljs-number">-02.</span>csv
inflammation<span class="hljs-number">-01.</span>csv
inflammation<span class="hljs-number">-09.</span>csv
inflammation<span class="hljs-number">-08.</span>csv
</div></code></pre>
<ul>
<li>We'd like to work with this set of files, so we store it in a variable, called <code>files</code>.
<ul>
<li>A suitable data type here is a <code>list</code>, and we can populate it one file at a time, using <code>.append()</code></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>files = []
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">'data'</span>):
<span class="hljs-meta">... </span>    <span class="hljs-keyword">if</span> <span class="hljs-string">'inflammation'</span> <span class="hljs-keyword">in</span> file:
<span class="hljs-meta">... </span>            files.append(file)
<span class="hljs-meta">... </span>
<span class="hljs-meta">&gt;&gt;&gt; </span>print(files)
[<span class="hljs-string">'inflammation-05.csv'</span>, <span class="hljs-string">'inflammation-11.csv'</span>, <span class="hljs-string">'inflammation-10.csv'</span>, <span class="hljs-string">'inflammation-04.csv'</span>, <span class="hljs-string">'inflammation-12.csv'</span>, <span class="hljs-string">'inflammation-06.csv'</span>, <span class="hljs-string">'inflammation-07.csv'</span>, <span class="hljs-string">'inflammation-03.csv'</span>, <span class="hljs-string">'inflammation-02.csv'</span>, <span class="hljs-string">'inflammation-01.csv'</span>, <span class="hljs-string">'inflammation-09.csv'</span>, <span class="hljs-string">'inflammation-08.csv'</span>]
</div></code></pre>
<ul>
<li><strong>Let's put this in our script</strong>
<ul>
<li><strong>EXIT THE CONSOLE</strong></li>
<li><strong>OPEN THE SCRIPT</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>nano analyse_files.py
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Get a list of inflammation data files</span>
files = []
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">'data'</span>):
  <span class="hljs-keyword">if</span> <span class="hljs-string">'inflammation'</span> <span class="hljs-keyword">in</span> fname:
    files.append(fname)
print(<span class="hljs-string">"Inflammation data files:"</span>, files)
</div></code></pre>
<ul>
<li><strong>EXIT EDITOR AND RUN THE SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
Inflammation data files: [<span class="hljs-string">'inflammation-05.csv'</span>, <span class="hljs-string">'inflammation-11.csv'</span>, <span class="hljs-string">'inflammation-10.csv'</span>, <span class="hljs-string">'inflammation-04.csv'</span>, <span class="hljs-string">'inflammation-12.csv'</span>, <span class="hljs-string">'inflammation-06.csv'</span>, <span class="hljs-string">'inflammation-07.csv'</span>, <span class="hljs-string">'inflammation-03.csv'</span>, <span class="hljs-string">'inflammation-02.csv'</span>, <span class="hljs-string">'inflammation-01.csv'</span>, <span class="hljs-string">'inflammation-09.csv'</span>, <span class="hljs-string">'inflammation-08.csv'</span>]
</div></code></pre>
<ul>
<li><strong>QUESTION: what's wrong with the filenames?</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>os.path.join()</code></p>
<ul>
<li>
<p>The <strong><code>os.listdir()</code> function only returns filenames</strong>, not the <em>path</em> (relative or absolute) to those files.</p>
<ul>
<li><strong>WE NEED THE FULL PATH TO A FILE TO BE ABLE TO USE IT</strong></li>
</ul>
</li>
<li>
<p>To <strong>construct a path</strong>, we can use the <code>os.path.join()</code> function.</p>
<ul>
<li><code>os.path.join()</code> takes directory and file names, and returns a path built from them as a string, suitable for the underlying operating system.</li>
<li><strong>This is useful for making code shareable and usable on all OS/computers</strong></li>
</ul>
</li>
<li>
<p><strong>START PYTHON CONSOLE</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>python
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">&gt;&gt;&gt; </span>os.path.join(<span class="hljs-string">'parent'</span>, <span class="hljs-string">'child'</span>, <span class="hljs-string">'file.txt'</span>)
<span class="hljs-string">'parent/child/file.txt'</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>os.path.join(<span class="hljs-string">'data'</span>, <span class="hljs-string">'inflammation-01.csv'</span>)
<span class="hljs-string">'data/inflammation-01.csv'</span>
</div></code></pre>
<ul>
<li><strong>CLOSE CONSOLE AND OPEN EDITOR</strong></li>
</ul>
<pre class="hljs"><code><div>$ nano analyse_files.py
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Get a list of inflammation data files</span>
files = []
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">'data'</span>):
  <span class="hljs-keyword">if</span> <span class="hljs-string">'inflammation'</span> <span class="hljs-keyword">in</span> fname:
    files.append(os.path.join(<span class="hljs-string">'data'</span>, fname))
print(<span class="hljs-string">"Inflammation data files:"</span>, files)
</div></code></pre>
<ul>
<li><strong>SAVE AND EXIT SCRIPT, THEN RUN</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
Inflammation data files: [<span class="hljs-string">'data/inflammation-05.csv'</span>, <span class="hljs-string">'data/inflammation-11.csv'</span>, <span class="hljs-string">'data/inflammation-10.csv'</span>, <span class="hljs-string">'data/inflammation-04.csv'</span>, <span class="hljs-string">'data/inflammation-12.csv'</span>, <span class="hljs-string">'data/inflammation-06.csv'</span>, <span class="hljs-string">'data/inflammation-07.csv'</span>, <span class="hljs-string">'data/inflammation-03.csv'</span>, <span class="hljs-string">'data/inflammation-02.csv'</span>, <span class="hljs-string">'data/inflammation-01.csv'</span>, <span class="hljs-string">'data/inflammation-09.csv'</span>, <span class="hljs-string">'data/inflammation-08.csv'</span>]
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Visualising the data</p>
<ul>
<li>Now <strong>we have all the tools we need</strong> to load all the inflammation data files, and visualise the mean, minimum and maximum values in an array of plots.
<ul>
<li>We can get a <strong>list of paths to the data files</strong> with <code>os</code> and a <em>list comprehension</em></li>
<li>We can <strong>load data from a file</strong> with <code>numpy.loadtxt()</code></li>
<li>We can <strong>calculate summary statistics</strong> with <code>numpy.mean()</code>, <code>numpy.max()</code>, etc.</li>
<li>We can <strong>create figures</strong> with <code>matplotlib</code>, and arrays of figures with <code>.add_subplot()</code></li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Visualisation code</p>
<ul>
<li><strong>BUILD THE CODE IN STAGES</strong>
<ul>
<li><strong>OPEN THE SCRIPT IN THE EDITOR</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ nano analyse_files.py
</div></code></pre>
<ul>
<li><strong>1 - show that we see each filename in turn</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files: 
    print(<span class="hljs-string">"Analysing"</span>, fname)
</div></code></pre>
<ul>
<li><strong>2 - load the data in each file</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files: 
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)
</div></code></pre>
<ul>
<li><strong>3 - create a figure for each file</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files: 
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># create figure and three axes </span>
    fig = plt.figure(figsize=(<span class="hljs-number">10.0</span>, <span class="hljs-number">3.0</span>))
    axes1 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)
    axes2 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
    axes3 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)
</div></code></pre>
<ul>
<li><strong>4 - decorate the axes</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files: 
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># create figure and three axes </span>
    fig = plt.figure(figsize=(<span class="hljs-number">10.0</span>, <span class="hljs-number">3.0</span>))
    axes1 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)
    axes2 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
    axes3 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment"># decorate the axes</span>
    axes1.set_ylabel(<span class="hljs-string">'average'</span>)
    axes2.set_ylabel(<span class="hljs-string">'maximum'</span>)
    axes3.set_ylabel(<span class="hljs-string">'minimum'</span>)
</div></code></pre>
<ul>
<li><strong>5 - plot the data</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files: 
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># create figure and three axes </span>
    fig = plt.figure(figsize=(<span class="hljs-number">10.0</span>, <span class="hljs-number">3.0</span>))
    axes1 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)
    axes2 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
    axes3 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment"># decorate the axes</span>
    axes1.set_ylabel(<span class="hljs-string">'average'</span>)
    axes2.set_ylabel(<span class="hljs-string">'maximum'</span>)
    axes3.set_ylabel(<span class="hljs-string">'minimum'</span>)

    <span class="hljs-comment"># plot the data</span>
    axes1.plot(data.mean(axis=<span class="hljs-number">0</span>))
    axes2.plot(data.max(axis=<span class="hljs-number">0</span>))
    axes3.plot(data.min(axis=<span class="hljs-number">0</span>))
</div></code></pre>
<ul>
<li><strong>6 - tidy and show plot</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files: 
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># create figure and three axes </span>
    fig = plt.figure(figsize=(<span class="hljs-number">10.0</span>, <span class="hljs-number">3.0</span>))
    axes1 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)
    axes2 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
    axes3 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment"># decorate the axes</span>
    axes1.set_ylabel(<span class="hljs-string">'average'</span>)
    axes2.set_ylabel(<span class="hljs-string">'maximum'</span>)
    axes3.set_ylabel(<span class="hljs-string">'minimum'</span>)

    <span class="hljs-comment"># plot the data</span>
    axes1.plot(data.mean(axis=<span class="hljs-number">0</span>))
    axes2.plot(data.max(axis=<span class="hljs-number">0</span>))
    axes3.plot(data.min(axis=<span class="hljs-number">0</span>))

    <span class="hljs-comment"># tidy plot and render</span>
    fig.tight_layout()
    plt.show()
</div></code></pre>
<ul>
<li><strong>EXIT THE EDITOR AND RUN SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<ul>
<li><strong>THIS IS INTERACTIVE. WHAT IF WE WANT TO SAVE IMAGES?</strong>
<ul>
<li><strong>OPEN THE EDITOR AND CHANGE THE SCRIPT</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>[...]

<span class="hljs-comment"># Get a list of inflammation data files</span>
files = []
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">'data'</span>):
  <span class="hljs-keyword">if</span> <span class="hljs-string">'inflammation'</span> <span class="hljs-keyword">in</span> fname <span class="hljs-keyword">and</span> fname[<span class="hljs-number">-4</span>:] == <span class="hljs-string">'.csv'</span>:
    files.append(os.path.join(<span class="hljs-string">'data'</span>, fname))

[...]

    <span class="hljs-comment"># tidy plot and render</span>
    fig.tight_layout()
    <span class="hljs-comment"># plt.show()</span>

    <span class="hljs-comment"># save image to file</span>
    imgname = fname[:<span class="hljs-number">-4</span>] + <span class="hljs-string">'.png'</span>
    print(<span class="hljs-string">'Writing image to'</span>, imgname)
    plt.savefig(imgname)
</div></code></pre>
<ul>
<li><strong>EXIT THE EDITOR AND RUN SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
</div></code></pre>
<ul>
<li><strong>CHECK CONTENTS OF <code>data</code> DIRECTORY, AND VIEW <code>.png</code> FILES</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Checking data</p>
<ul>
<li>There are <strong>two suspicious features</strong> to some of the datasets</li>
</ul>
<ol>
<li>The <strong>maximum values rose and fell as straight lines</strong></li>
<li>The <strong>minimum values are consistently zero</strong></li>
</ol>
<ul>
<li>We'll use <code>if</code> statements to <strong>test for these conditions and give a warning</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Test for suspicious maxima</p>
<ul>
<li>Is day zero value 0, and day 20 value 20?</li>
</ul>
<pre class="hljs"><code><div>$ nano analyse_files.py
</div></code></pre>
<ul>
<li><strong>ADD TO EXISTING CODE BEFORE CREATING FIGURE</strong></li>
</ul>
<pre class="hljs"><code><div>    <span class="hljs-comment"># Test for suspicious maxima</span>
    <span class="hljs-keyword">if</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">20</span>] == <span class="hljs-number">20</span>:
        print(<span class="hljs-string">"Suspicious-looking maxima!"</span>)
</div></code></pre>
<ul>
<li><strong>RUN SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> SUSPICIOUS MINIMA</p>
<ul>
<li>Are all the minima zero? (do they sum to zero?)</li>
</ul>
<pre class="hljs"><code><div>$ nano analyse_files.py
</div></code></pre>
<ul>
<li><strong>ADD TO EXISTING CODE BEFORE CREATING FIGURE</strong></li>
</ul>
<pre class="hljs"><code><div>    <span class="hljs-comment"># Test for suspicious maxima</span>
    <span class="hljs-keyword">if</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">20</span>] == <span class="hljs-number">20</span>:
        print(<span class="hljs-string">"Suspicious-looking maxima!"</span>)
    <span class="hljs-keyword">elif</span> np.sum(data.min(axis=<span class="hljs-number">0</span>)) == <span class="hljs-number">0</span>:
        print(<span class="hljs-string">'Minima sum to zero!'</span>)
</div></code></pre>
<ul>
<li><strong>RUN SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> BEING TIDY</p>
<ul>
<li>If everything's OK, <strong>let's be reassuring</strong></li>
</ul>
<ul>
<li><strong>ADD TO EXISTING CODE BEFORE PLOT</strong></li>
</ul>
<ul>
<li><strong>ADD TO EXISTING CODE BEFORE CREATING FIGURE</strong></li>
</ul>
<pre class="hljs"><code><div>    <span class="hljs-comment"># Test for suspicious maxima</span>
    <span class="hljs-keyword">if</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">20</span>] == <span class="hljs-number">20</span>:
        print(<span class="hljs-string">"Suspicious-looking maxima!"</span>)
    <span class="hljs-keyword">elif</span> np.sum(data.min(axis=<span class="hljs-number">0</span>)) == <span class="hljs-number">0</span>:
        print(<span class="hljs-string">'Minima sum to zero!'</span>)
    <span class="hljs-keyword">else</span>:
        print(<span class="hljs-string">'Seems OK!'</span>)
</div></code></pre>
<ul>
<li><strong>RUN SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<h2 id="section-09-conclusions-part-1">SECTION 09: Conclusions (Part 1)</h2>
<hr>
<p><strong>SLIDE</strong> Learning outcomes</p>
<p>Some things you might not have known about at lunchtime:</p>
<ul>
<li>variables</li>
<li>data types: arrays, lists, strings, numbers</li>
<li>file IO: loading data, listing files, manipulating filenames</li>
<li>calculating statistics</li>
<li>plotting data: plots and subplots</li>
<li>program flow: loops and conditionals</li>
<li>automating multiple analyses</li>
<li><code>Python</code> scripts: edit-save-execute</li>
</ul>
<hr>
<p><strong>SLIDE</strong> WELL DONE!</p>
<ul>
<li><strong>SEND THEM HOME HAPPY!</strong></li>
</ul>
<hr>
<h2 id="title-building-programs-with-python-part-2">TITLE: Building Programs With Python (Part 2)</h2>
<hr>
<p><strong>SLIDE:</strong> Etherpad</p>
<ul>
<li>Please use the Etherpad for the course <strong>DEMONSTRATE LINK</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Why are we here?</p>
<ul>
<li>We're here to learn <strong>how to program</strong></li>
<li>This is a way to <strong>solve problems in your research</strong> through making a computer do work <strong>quickly</strong> and <strong>accurately</strong>
<ul>
<li>You'll be continuing to <strong>build your data analysis</strong> script from yesterday</li>
<li>You'll <strong>automate</strong> functions to perform tasks over and over again (in various combinations)</li>
</ul>
</li>
<li>You'll <strong>manipulate data</strong>, which is at the heart of all academia
<ul>
<li>You'll learn how to build <strong>functions</strong> that do specific, defined tasks and encapsulate code, making it reusable and readable</li>
<li>You'll learn some <strong>defensive programming</strong>, so that you automatically catch problems in your code/data handling</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> XKCD</p>
<ul>
<li>Again, this slide is only a little bit flippant</li>
<li><em>No-one</em> writes perfect code, first time
<ul>
<li>It's all about revision, and good practice: <strong>defensive programming</strong></li>
<li>These principles will make your life, and other people's lives, much easier</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Setting up</p>
<ul>
<li>
<p>We want a neat (clean) working environment</p>
</li>
<li>
<p>Change directory to desktop (in terminal or Explorer)</p>
</li>
<li>
<p>Change your working directory to <code>python-novice-inflammation</code> (from yesterday/earlier)</p>
</li>
</ul>
<pre class="hljs"><code><div>$ <span class="hljs-built_in">cd</span> ~/Desktop
$ <span class="hljs-built_in">cd</span> python-novice-inflammation
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p>## SECTION 10: <code>Jupyter</code> notebooks</p>
<hr>
<p><strong>SLIDE</strong> Starting <code>Jupyter</code></p>
<ul>
<li>Make sure you're in the project directory <code>python-novice-inflammation</code></li>
<li><strong>Start <code>Jupyter</code></strong> from the command-line</li>
<li><strong>CHECK WHETHER EVERYONE SEES A WORKING JUPYTER NOTEBOOK</strong></li>
</ul>
<pre class="hljs"><code><div>$ jupyter notebook
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> <code>Jupyter</code> landing page</p>
<ul>
<li>
<p><strong><code>Jupyter</code> landing page is a file browser</strong>, like Explorer/Finder</p>
<ul>
<li>Point out <code>Python</code> (<code>.py</code>) files, <code>.zip</code> files, and directories)</li>
<li>Point out directory (<code>data</code>), and how the file symbols are different. (<em>the triangle by the check box gives a key</em>)</li>
</ul>
</li>
<li>
<p><strong>Point out <code>New</code> button.</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Create a new notebook</p>
<ul>
<li>Click on <code>New -&gt; Python 3</code></li>
<li>Point out that there may or may not be other options in the student's installation</li>
<li>Indicate the new features on the empty notebook:
<ul>
<li>The <strong>notebook name</strong>: <code>Untitled</code></li>
<li><strong>Checkpoint</strong> information (the last time the notebook was saved, for safety)</li>
<li>The <strong>menu bar</strong> (<code>File Edit etc.</code>) - just like <code>Word</code> or <code>Excel</code></li>
<li>An indication of <strong>which kernel you're using/language you're in</strong></li>
<li><strong>Icon view</strong> (just like <code>Word</code> or <code>Excel</code>)</li>
<li>An empty cell with <code>In [ ]:</code></li>
</ul>
</li>
<li>Point out the <strong>box around the cell</strong>, and that it <strong>changes colour</strong> when you start to edit</li>
</ul>
<hr>
<p><strong>SLIDE</strong> My first notebook</p>
<ul>
<li><strong>Give the notebook the name <code>functions</code></strong></li>
<li>Click on <code>Untitled</code> and enter the name <code>functions</code></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Cell types</p>
<ul>
<li>
<p><code>Jupyter</code> documents are comprised of <code>cells</code></p>
</li>
<li>
<p>A <code>cell</code> can be one of <strong>several types</strong> - we'll focus on two:</p>
<ul>
<li><code>Code</code>: <strong>code</strong> in the current kernel/language</li>
<li><code>Markdown</code>: <strong>text</strong>, with the opportunity for formatting</li>
</ul>
</li>
<li>
<p><strong>Change the first cell type to <code>Markdown</code></strong></p>
<ul>
<li>The box <strong>colour changes</strong> from green to blue</li>
<li>The <code>In []</code> <strong>prompt disappears</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Markdown text</p>
<ul>
<li>
<p><code>Markdown</code> lets us <strong>enter formatted text</strong></p>
<ul>
<li><strong>Headers</strong> are preceded by a hash: <code>#</code></li>
<li>The <strong>level of header</strong> is determined by the number of hashes: <code>#</code></li>
<li><strong>Typewriter text/code</strong> is shown by enclosing in backticks: ```</li>
<li><strong>Italics</strong> are shown by enclosing text in single asterisks: <code>*italic*</code></li>
<li><strong>LaTeX</strong> can be entered within dollar signs <code>$</code></li>
</ul>
</li>
<li>
<p>Press <code>Shift + Enter</code> to execute a cell</p>
</li>
<li>
<p>The cell is rendered, and a new cell appears beneath the executed cell</p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section"># Functions</span>

Functions are pieces of code that take an input and return an output. They enable us to break our code into logical chunks that are easier to understand and maintain.

<span class="hljs-section">## Temperature conversion</span>

As an example in <span class="hljs-code">`Python`</span>, we will create a function that converts temperature between <span class="hljs-emphasis">*Fahrenheit*</span> and <span class="hljs-emphasis">*Kelvin*</span> scales.
</div></code></pre>
<hr>
<p>## SECTION 11: Functions</p>
<hr>
<p><strong>SLIDE</strong> Motivation</p>
<ul>
<li>
<p>We wrote some code that plots values of interest from multiple datasets</p>
<ul>
<li><strong>but that code is long and complicated</strong></li>
</ul>
</li>
<li>
<p>The code is also not very flexible if we want to deal with thousands of files, and we can't modify it to plot only a subset of files very easily</p>
<ul>
<li>Cutting and pasting is slow and error-prone</li>
</ul>
</li>
<li>
<p><strong>SO</strong> we will package our code for reuse.</p>
<ul>
<li><strong>We do this by writing functions</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> What is a function?</p>
<ul>
<li>
<p>Functions in code work <strong>like mathematical functions</strong>, like $y = f(x)$</p>
<ul>
<li>$f()$  is the function</li>
<li>$x$  is an <strong>input</strong> (or inputs)</li>
<li>$y$  is the <strong>returned value</strong>, or output(s)</li>
</ul>
</li>
<li>
<p>The function's output  $y$ depends in some way on the value of  $x$ - the dependency is defined by $f()$.</p>
</li>
<li>
<p><strong>Not all functions in code take an input, or produce a usable output, but the principle is generally the same.</strong></p>
</li>
<li>
<p><strong>You've already been using functions in this course: <code>print()</code>, <code>numpy.max()</code>, etc.</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> My first function</p>
<ul>
<li><strong>REFER TO THE CODE IN THE NOTEBOOK</strong>
<ul>
<li>We've written a function to convert Fahrenheit to Kelvin, called <code>fahr_to_kelvin()</code></li>
</ul>
</li>
</ul>
<ul>
<li><strong>Describe the mathematical function</strong>:
<ul>
<li>This function takes <code>x</code>, subtracts 32, multiplies by 5/9, and adds 273.15</li>
</ul>
</li>
</ul>
<ul>
<li>In <code>Python</code> this <strong>translates to the code below</strong>:
<ul>
<li>The function <strong>performs a calculation, which is <em>returned</em> by the <code>return</code> statement</strong>.</li>
<li>The value of <strong>the variable <code>temp</code> is taken through the same calculation as in the mathematical function</strong>, and is then <em>return</em>ed.</li>
<li>Functions are <em>defined</em> by the <code>def</code> keyword</li>
<li>The name of the function follows the <code>def</code> keyword (equivalent to <code>f</code> in the mathematical example)</li>
<li>The first line ends in a colon, just like a <code>for</code> loop or <code>if</code> statement.</li>
<li>The code, or <em>body</em> of the function is indented, just like a <code>for</code> loop or <code>if</code> statement.</li>
<li>The <em>parameters</em> or <em>inputs</em> to the function are then defined in parentheses. These get a variable name <strong>which only exists within the function</strong>. Here, there is one parameter, called <code>temp</code>.</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Calling the function</p>
<ul>
<li>We <strong>call <code>fahr_to_kelvin</code> in exactly the same way we call any other function we've seen</strong> so far
<ul>
<li>e.g. <code>print()</code> or <code>numpy.mean()</code></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>print(<span class="hljs-string">'freezing point of water:'</span>, fahr_to_kelvin(<span class="hljs-number">32</span>))
print(<span class="hljs-string">'boiling point of water:'</span>, fahr_to_kelvin(<span class="hljs-number">212</span>))
</div></code></pre>
<ul>
<li><strong>NOTE: that the returned values from executing code show up in the notebook below the cell</strong></li>
</ul>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> Create a new function</p>
<ul>
<li><strong>ASK THE LEARNERS HOW WE WOULD CREATE A NEW FUNCTION TO CONVERT KELVIN TO CELSIUS</strong></li>
<li><strong>Walk through the process, being prompted</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">kelvin_to_celsius</span><span class="hljs-params">(temp)</span>:</span>
  <span class="hljs-keyword">return</span> temp - <span class="hljs-number">273.15</span>
</div></code></pre>
<ul>
<li><strong>ASK THE LEARNERS HOW TO CALL THE FUNCTION</strong></li>
</ul>
<pre class="hljs"><code><div>print(<span class="hljs-string">'freezing point of water'</span>, kelvin_to_celsius(<span class="hljs-number">273.15</span>))
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Composing functions</p>
<ul>
<li>
<p><strong>Composing <code>Python</code> functions works just like mathematical functions</strong>: <code>y = f(g(x))</code></p>
</li>
<li>
<p><strong>ASK HOW WE CAN CONVERT FAHRENHEIT TO CELSIUS WITH OUR EXISTING FUNCTIONS</strong></p>
<ul>
<li>We could convert a temperature in fahrenheit (<code>temp_f</code>) to a temperature in celsius (<code>temp_c</code>) by <strong>executing the code</strong>:</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>temp_f = <span class="hljs-number">212.0</span>
temp_c = kelvin_to_celsius(fahr_to_kelvin(temp_f))
print(temp_c)
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> New functions from old</p>
<ul>
<li>**ASK LEARNERS HOW WE CAN TURN THIS INTO A NEW FUNCTION: <code>fahr_to_celsius()</code>:</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">fahr_to_celsius</span><span class="hljs-params">(temp_f)</span>:</span>
    <span class="hljs-keyword">return</span> kelvin_to_celsius(fahr_to_kelvin(temp_f))
</div></code></pre>
<ul>
<li>We can call this just like any other function</li>
</ul>
<pre class="hljs"><code><div>print(<span class="hljs-string">'freezing point of water in Celsius:'</span>, fahr_to_celsius(<span class="hljs-number">32.0</span>))
</div></code></pre>
<ul>
<li><strong>THIS IS HOW PROGRAMS ARE BUILT: COMBINING SMALL CHUNKS OF CODE INTO LARGER BITS UNTIL WE GET THE RESULT WE WANT</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Exercise 08 (10min)</p>
<ul>
<li><strong>SHOW THE SLIDES FOR THE EXERCISE</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">outer</span><span class="hljs-params">(s)</span>
    <span class="hljs-title">return</span> <span class="hljs-title">s</span>[0] + <span class="hljs-title">s</span>[-1]
</span></div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<ul>
<li><strong>RETURN TO THE NOTEBOOK</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Function scope</p>
<ul>
<li><strong>Make a Markdown note</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section">## Function scope</span>

Variables defined within a function (including parameters) are not available outside the function unless they are returned.
</div></code></pre>
<ul>
<li>
<p><strong>This is called <em>function scope</em></strong></p>
</li>
<li>
<p><strong>DEMO THE CODE BELOW</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>a = <span class="hljs-string">"Hello"</span>

print(a)
</div></code></pre>
<ul>
<li>
<p>This code defines a variable <code>a</code> and gives it a value &quot;Hello&quot;</p>
</li>
<li>
<p><strong>NOW DECLARE A FUNCTION (IN THE SAME CELL) AND CALL IT</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>a = <span class="hljs-string">"Hello"</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_fn</span><span class="hljs-params">(a)</span>:</span>
    a = <span class="hljs-string">"Goodbye"</span>

my_fn(a)
print(a)
</div></code></pre>
<ul>
<li>Returning <code>a</code> doesn't - by itself - change anything</li>
</ul>
<pre class="hljs"><code><div>a = <span class="hljs-string">"Hello"</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_fn</span><span class="hljs-params">()</span>:</span>
    a = <span class="hljs-string">"Goodbye"</span>
    <span class="hljs-keyword">return</span> a

my_fn(a)
print(a)
</div></code></pre>
<ul>
<li>To move values to and from functions, you should generally <code>return</code> them from the function, <em>and</em> catch them in a variable</li>
<li><strong>COMPLETE THE CODE EXAMPLE IN THE CELL</strong></li>
</ul>
<pre class="hljs"><code><div>a = <span class="hljs-string">"Hello"</span>

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">my_fn</span><span class="hljs-params">(a)</span>:</span>
  a = <span class="hljs-string">"Goodbye"</span>
  <span class="hljs-keyword">return</span> a
  
a = my_fn(a)
print(a)
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Exercise 09 (5min)</p>
<ul>
<li>
<p><strong>PUT THE SLIDES ON SCREEN</strong></p>
</li>
<li>
<p><strong>MCQ: put coloured stickies up</strong></p>
</li>
<li>
<p>Solution: <code>1: 7 3</code> (this differs from that on the SWC page)</p>
</li>
</ul>
<hr>
<p>## SECTION 12: Refactoring</p>
<hr>
<p><strong>SLIDE</strong> Tidying up</p>
<ul>
<li>
<p>Now we can write functions, <strong>let's make the inflammation analysis easier to reuse</strong></p>
<ul>
<li><strong>ONE FUNCTION PER OPERATION</strong></li>
</ul>
</li>
<li>
<p><strong>CLOSE THE NOTEBOOKS</strong></p>
</li>
<li>
<p>**OPEN UP THE <code>ANALYSE_FILES.PY</code> SCRIPT</p>
</li>
<li>
<p><strong>TALK THE STUDENTS THROUGH THE CODE LOGIC: TWO SECTIONS - ANALYSE AND DETECT PROBLEMS</strong></p>
</li>
<li>
<p>The code can be divided into two main sections, which could be functions:</p>
<ol>
<li>check the data for problems</li>
<li>plot the data</li>
</ol>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> <code>detect_problems()</code></p>
<ul>
<li>
<p>We noticed that some data was questionable</p>
</li>
<li>
<p>This function spots problems with the data</p>
<ul>
<li>Call the function after loading, before plotting</li>
</ul>
</li>
<li>
<p><strong>OPEN EDITOR AND CHANGE CODE</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>$ nano analyse_files.py
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-comment"># Detect problems with a dataset</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">detect_problems</span><span class="hljs-params">(data)</span>:</span>
    <span class="hljs-keyword">if</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">0</span>] == <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> np.max(data, axis=<span class="hljs-number">0</span>)[<span class="hljs-number">20</span>] == <span class="hljs-number">20</span>:
        print(<span class="hljs-string">"Suspicious-looking maxima!"</span>)
    <span class="hljs-keyword">elif</span> np.sum(data.min(axis=<span class="hljs-number">0</span>)) == <span class="hljs-number">0</span>:
        print(<span class="hljs-string">'Minima sum to zero!'</span>)
    <span class="hljs-keyword">else</span>:
        print(<span class="hljs-string">'Seems OK!'</span>)

<span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files:
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># identify problems in the data</span>
    detect_problems(data)
</div></code></pre>
<ul>
<li><strong>SAVE AND RUN SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python analyse_files.py
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>plot_data()</code></p>
<ul>
<li>We'll write <strong>a function that plots the data</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Plot passed data in the specified file</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">plot_data</span><span class="hljs-params">(data, fname)</span>:</span>
    <span class="hljs-comment"># create figure and three axes</span>
    fig = plt.figure(figsize=(<span class="hljs-number">10.0</span>, <span class="hljs-number">3.0</span>))
    axes1 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)
    axes2 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
    axes3 = fig.add_subplot(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment"># decorate the axes</span>
    axes1.set_ylabel(<span class="hljs-string">'average'</span>)
    axes2.set_ylabel(<span class="hljs-string">'maximum'</span>)
    axes3.set_ylabel(<span class="hljs-string">'minimum'</span>)

    <span class="hljs-comment"># plot the data</span>
    axes1.plot(data.mean(axis=<span class="hljs-number">0</span>))
    axes2.plot(data.max(axis=<span class="hljs-number">0</span>))
    axes3.plot(data.min(axis=<span class="hljs-number">0</span>))

    <span class="hljs-comment"># tidy plot and render</span>
    fig.tight_layout()
    print(<span class="hljs-string">'Writing image to'</span>, imgname)
    plt.savefig(imgname)

<span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files:
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># identify problems in the data</span>
    detect_problems(data)

    <span class="hljs-comment"># plot image in file</span>
    imgname = fname[:<span class="hljs-number">-4</span>] + <span class="hljs-string">'.png'</span>
    plot_data(data, imgname)
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Code reuse</p>
<ul>
<li><strong>The logic of the code is now easier to understand</strong></li>
<li>We identify the input files, then apply one function per action in a loop:
<ul>
<li>Print the filename</li>
<li>Load the data with <code>np.loadtxt()</code></li>
<li><code>detect_problems()</code> in the data</li>
<li><code>plot_data()</code> the data</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Analyse each file in turn</span>
<span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> files:
    print(<span class="hljs-string">"Analysing"</span>, fname)

    <span class="hljs-comment"># load data</span>
    data = np.loadtxt(fname=fname, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-comment"># identify problems in the data</span>
    detect_problems(data)

    <span class="hljs-comment"># plot image in file</span>
    imgname = fname[:<span class="hljs-number">-4</span>] + <span class="hljs-string">'.png'</span>
    plot_data(data, imgname)
</div></code></pre>
<ul>
<li><strong>THIS HAS ADVANTAGES</strong>
<ul>
<li><strong>The code is much shorter (as we read it, here)</strong></li>
<li><strong>The function names are human-readable and descriptive</strong></li>
<li><strong>It is much easier to see what the code is doing</strong></li>
</ul>
</li>
</ul>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> Good code pays off</p>
<ul>
<li><strong>YOU MAY BE ASKING YOURSELF WHY YOU WANT TO BOTHER WITH THIS</strong>
<ul>
<li>After 6 months, the referee report arrives and you need to rerun experiments</li>
<li>Another student is continuing the project</li>
<li>Some random person reads your article and asks for the code</li>
<li>Helps spot errors quickly</li>
<li>Clarifies structure in your mind as well as in the code</li>
<li>Saves you time in the long run! (&quot;Future You&quot; will back this up)</li>
</ul>
</li>
</ul>
<hr>
<h2 id="section-13-command-line-programs">SECTION 13: Command-line programs</h2>
<hr>
<p><strong>SLIDE</strong> Learning objectives</p>
<ul>
<li>
<p><strong>How can I write Python programs that will work like Unix command-line tools?</strong></p>
</li>
<li>
<p>Use the values of <strong>command-line arguments</strong> in a program.</p>
</li>
<li>
<p>Handle <strong>flags and files</strong> separately in a command-line program.</p>
</li>
<li>
<p><strong>Read data from standard input</strong> in a program so that it can be used in a pipeline (with <em>pipes</em>: <code>|</code>)</p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> The <code>sys</code> module</p>
<ul>
<li>
<p>The <code>sys</code> module is the main way <code>Python</code> lets you interact with the operating system. You can:</p>
<ul>
<li><strong>run programs</strong></li>
<li><strong>parse commands</strong></li>
<li><strong>get information about the system</strong></li>
</ul>
</li>
<li>
<p>We're going to use it in some new scripts</p>
<ul>
<li><strong>Create a new file called <code>sys_version.py</code></strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ nano sys_version.py
</div></code></pre>
<ul>
<li><strong>Enter the code below</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> sys
print(<span class="hljs-string">'version is'</span>, sys.version)
</div></code></pre>
<ul>
<li><strong>Run the script</strong></li>
</ul>
<pre class="hljs"><code><div>$ python sys_version.py 
version is 3.6.3 |Anaconda custom (64-bit)| (default, Oct  6 2017, 12:04:38) 
[GCC 4.2.1 Compatible Clang 4.0.1 (tags/RELEASE_401/final)]
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>sys.argv</code></p>
<ul>
<li>
<p><code>sys.argv</code> is a variable that contains the command-line arguments used to call our script</p>
<ul>
<li>The variable is a <strong>list of arguments</strong></li>
</ul>
</li>
<li>
<p><strong>Open a new file called <code>sys_argv.py</code> in the editor</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>$ nano sys_argv.py
</div></code></pre>
<ul>
<li><strong>Enter the code below</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> sys
print(<span class="hljs-string">'sys.argv is'</span>, sys.argv)
</div></code></pre>
<ul>
<li><strong>Run the script with some options</strong></li>
</ul>
<pre class="hljs"><code><div>$ python sys_argv.py 
sys.argv is [<span class="hljs-string">'sys_argv.py'</span>]
$ python sys_argv.py item1 item2 somefile.txt
sys.argv is [<span class="hljs-string">'sys_argv.py'</span>, <span class="hljs-string">'item1'</span>, <span class="hljs-string">'item2'</span>, <span class="hljs-string">'somefile.txt'</span>]
</div></code></pre>
<ul>
<li>The <strong>name of the script is always the first element: <code>sys.argv[0]</code></strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Building a new script</p>
<ul>
<li>We're going to build a script that <strong>reports readings from data files</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py mydata.csv
</div></code></pre>
<ul>
<li>We will make it <strong>take options</strong> <code>--min</code>, <code>--max</code>, <code>--mean</code>
<ul>
<li>The script will report <em>one</em> of these</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --min mydata.csv
</div></code></pre>
<ul>
<li>We will make it <strong>handle multiple files</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --min mydata.csv myotherdata.csv
</div></code></pre>
<ul>
<li>We will make it take <code>STDIN</code> so we can <strong>use it with <em>pipes</em></strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --min &lt; mydata.csv
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Starting the framework</p>
<ul>
<li>
<p>We start with a script that doesn't do all that</p>
<ul>
<li>We'll <strong>build features in one-by-one</strong></li>
</ul>
</li>
<li>
<p><strong>Create a new file called <code>readings.py</code> in the editor</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>$ nano readings.py
</div></code></pre>
<ul>
<li><strong>Add the code below and explain</strong>
<ul>
<li><strong>imports at the top</strong></li>
<li><strong>define a <code>main()</code> function</strong> to hold code that does the work of the script</li>
<li>We <strong>catch the script name</strong></li>
<li>We <strong>catch the first argument</strong> (filename)</li>
<li>We <strong>load the data</strong></li>
<li>For each patient, we print the mean inflammation</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> numpy

<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    script = sys.argv[<span class="hljs-number">0</span>]
    filename = sys.argv[<span class="hljs-number">1</span>]
    data = numpy.loadtxt(filename, delimiter=<span class="hljs-string">','</span>)
    <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> numpy.mean(data, axis=<span class="hljs-number">1</span>):
        print(m)
</div></code></pre>
<ul>
<li><strong>Run the script</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py
</div></code></pre>
<ul>
<li><strong>NOTHING HAPPENS - WHY?</strong>
<ul>
<li>We've defined a function, but it hasn't been called</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Calling a script</p>
<ul>
<li>
<p><strong>There's a way to tell if a <code>Python</code> file is being run as a script</strong></p>
</li>
<li>
<p>If we use this, we can use the same file as:</p>
<ul>
<li>a module (<code>import readings</code>)</li>
<li>a script (<code>$ python readings.py</code>)</li>
</ul>
</li>
<li>
<p>The <code>Python</code> code has <code>__name__ == '__main__'</code> only when run as a script</p>
</li>
<li>
<p><strong>We want to run <code>main()</code> only if the file is run as a script</strong></p>
<ul>
<li><strong>Add this code to the bottom of <code>readings.py</code></strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">'__main__'</span>:
   main()
</div></code></pre>
<ul>
<li><strong>Run the script</strong>
<ul>
<li><code>small-01.csv</code> is a reduced dataset, created for testing</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ python readings.py data/small-01.csv 
0.333333333333
1.0
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Handling multiple files</p>
<ul>
<li>We want to be able to analyse multiple files with one command
<ul>
<li><strong>NOTE:</strong> wildcards are expanded by the operating system</li>
<li><strong>DEMO the code</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>$ ls data/small-*
data/small-01.csv  data/small-02.csv  data/small-03.csv
$ python sys_argv.py data/small-*
sys.argv is [<span class="hljs-string">'sys_argv.py'</span>, <span class="hljs-string">'data/small-01.csv'</span>, <span class="hljs-string">'data/small-02.csv'</span>, <span class="hljs-string">'data/small-03.csv'</span>]
</div></code></pre>
<ul>
<li><strong>All arguments from index <code>1</code> onwards are filenames</strong>
<ul>
<li>So loop over everything in <code>sys.argv[1:]</code></li>
<li><strong>Change the <code>main()</code> function</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    script = sys.argv[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> sys.argv[<span class="hljs-number">1</span>:]:
        print(filename)
        data = numpy.loadtxt(filename, delimiter=<span class="hljs-string">','</span>)
        <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> numpy.mean(data, axis=<span class="hljs-number">1</span>):
            print(m)
</div></code></pre>
<ul>
<li><strong>Demo the code</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py data/small-*
data/small-01.csv
0.333333333333
1.0
data/small-02.csv
13.6666666667
11.0
data/small-03.csv
0.666666666667
0.666666666667
$ python readings.py data/small-01.csv
data/small-01.csv
0.333333333333
1.0
</div></code></pre>
<hr>
<p><strong>SLIDES</strong> Handling flags</p>
<ul>
<li><strong>We want to use <code>--min</code>, <code>--max</code>, <code>--mean</code> to tell the script what to calculate</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --max myfile.csv
</div></code></pre>
<ul>
<li>
<p>The flag will be <code>sys.argv[1]</code>, so filenames are <code>sys.argv[2:]</code></p>
<ul>
<li>We'll need to modify the code to handle this</li>
</ul>
</li>
<li>
<p>We should check that flags are valid</p>
<ul>
<li>Check this with an <code>if</code> statement</li>
<li><strong>Use <code>sys.exit()</code> to quit the script if the action is wrong</strong></li>
</ul>
</li>
<li>
<p><strong>MODIFY THE SCRIPT AS BELOW</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>:</span>
    script = sys.argv[<span class="hljs-number">0</span>]
    action = sys.argv[<span class="hljs-number">1</span>]
    filenames = sys.argv[<span class="hljs-number">2</span>:]
    <span class="hljs-keyword">if</span> action <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> [<span class="hljs-string">'--min'</span>, <span class="hljs-string">'--mean'</span>, <span class="hljs-string">'--max'</span>]:
        print(<span class="hljs-string">'Action is not one of --min, --mean, or --max: '</span> + action)
        sys.exit(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> filenames:
        process(f, action)
</div></code></pre>
<ul>
<li><strong>TRY THE SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --min data/small-01.csv 
Traceback (most recent call last):
  File <span class="hljs-string">"readings.py"</span>, line 15, <span class="hljs-keyword">in</span> &lt;module&gt;
    main()
  File <span class="hljs-string">"readings.py"</span>, line 12, <span class="hljs-keyword">in</span> main
    process(f, action)
NameError: name <span class="hljs-string">'process'</span> is not defined
</div></code></pre>
<ul>
<li>We'll add a <code>process()</code> function shortly</li>
<li><strong>TEST A BAD ACTION</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --std data/small<span class="hljs-number">-01.</span>csv 
Action <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> one of --min, --mean, <span class="hljs-keyword">or</span> --max: --std
</div></code></pre>
<ul>
<li><strong>We have a useful error message</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Add <code>process()</code></p>
<ul>
<li>
<p>We split the script into two functions for <strong>readability</strong></p>
<ul>
<li>The <code>main()</code> function clearly handles the command-line</li>
<li>The <code>process()</code> function handles the data</li>
</ul>
</li>
<li>
<p>**Add the code to <code>readings.py</code></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">process</span><span class="hljs-params">(filename, action)</span>:</span>
    data = numpy.loadtxt(filename, delimiter=<span class="hljs-string">','</span>)

    <span class="hljs-keyword">if</span> action == <span class="hljs-string">'--min'</span>:
        values = numpy.min(data, axis=<span class="hljs-number">1</span>)
    <span class="hljs-keyword">elif</span> action == <span class="hljs-string">'--mean'</span>:
        values = numpy.mean(data, axis=<span class="hljs-number">1</span>)
    <span class="hljs-keyword">elif</span> action == <span class="hljs-string">'--max'</span>:
        values = numpy.max(data, axis=<span class="hljs-number">1</span>)

    <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> values:
        print(m)
</div></code></pre>
<ul>
<li><strong>TRY THE SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --min data/small-01.csv 
0.0
0.0
$ python readings.py --mean data/small-01.csv 
0.333333333333
1.0
$ python readings.py --mean data/small-0*
0.333333333333
1.0
13.6666666667
11.0
0.666666666667
0.666666666667
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Using <code>STDIN</code></p>
<ul>
<li>
<p>The final change will let us <strong>use <code>STDIN</code> if no file is specified</strong></p>
<ul>
<li><code>sys.stdin</code> catches <code>STDIN</code> from the operating system</li>
</ul>
</li>
<li>
<p><strong>MODIFY THE SCRIPT AS BELOW</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>    <span class="hljs-keyword">if</span> len(filenames) == <span class="hljs-number">0</span>:
        process(sys.stdin, action)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> filenames:
            process(f, action)
</div></code></pre>
<ul>
<li><strong>TEST THE SCRIPT</strong></li>
</ul>
<pre class="hljs"><code><div>$ python readings.py --mean data/small-*
0.333333333333
1.0
13.6666666667
11.0
0.666666666667
0.666666666667
$ python readings.py --mean &lt; data/small-01.csv 
0.333333333333
1.0
</div></code></pre>
<ul>
<li><strong>AND WE'RE DONE!!!</strong></li>
</ul>
<hr>
<h2 id="section-14-testing-and-documentation">SECTION 14: Testing and documentation</h2>
<hr>
<p><strong>SLIDE</strong> Motivation</p>
<ul>
<li>Once a useful function is written, it gets reused over and over, often without further checking</li>
<li>When you write a function you should:
<ul>
<li><strong>Test output for correctness</strong></li>
<li><strong>Document the expected function</strong></li>
</ul>
</li>
<li>We'll demonstrate this with a function to centre a numerical array</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Create a new notebook</p>
<ul>
<li>
<p><strong>New notebook called <code>testing</code></strong></p>
</li>
<li>
<p><strong>ADD AN INTRO IN MARKDOWN</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section"># Testing and Documentation</span>

When writing a function, we should

<span class="hljs-bullet">- </span>test output for correctness
<span class="hljs-bullet">- </span>document the expected function
</div></code></pre>
<ul>
<li><strong>ADD IMPORTS</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> <code>centre()</code></p>
<ul>
<li>
<p><strong>Write the test function</strong></p>
</li>
<li>
<p>When doing some analyses, such as PCA, we might want to recentre and normalise our dataset.</p>
</li>
<li>
<p>Let's write a function to recentre an array of data, like the inflammation data.</p>
</li>
<li>
<p><strong>EXPLAIN THE MATHS IF NECESSARY</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">centre</span><span class="hljs-params">(data, desired)</span>:</span>
    <span class="hljs-keyword">return</span> (data - np.mean(data)) + desired
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Test datasets</p>
<ul>
<li>
<p><strong>ASK THE LEARNERS HOW WE CAN CHECK THAT THE FUNCTION WORKS IN THE WAY WE INTEND</strong></p>
</li>
<li>
<p>We could try <code>centre()</code> on our real data, but we <em>don't know what the answer should be!</em>*</p>
<ul>
<li>We'll use <code>numpy</code>'s <code>zeros()</code> function to generate an <strong>input set where we know the answer</strong></li>
</ul>
</li>
<li>
<p><strong>SHOW THE TEST DATA</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>z = np.zeros((<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))
z
</div></code></pre>
<ul>
<li><strong>Let's recentre the data at the value 2</strong></li>
</ul>
<pre class="hljs"><code><div>centre(z, <span class="hljs-number">3.0</span>)
</div></code></pre>
<ul>
<li><strong>This works, so we'll try it on real data</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Real data</p>
<ul>
<li><strong>LOAD THE DATA</strong></li>
</ul>
<pre class="hljs"><code><div>data = np.loadtxt(fname=<span class="hljs-string">'data/inflammation-01.csv'</span>, delimiter=<span class="hljs-string">','</span>)
</div></code></pre>
<ul>
<li><strong>Let's recentre the data to zero</strong></li>
</ul>
<pre class="hljs"><code><div>centre(data, <span class="hljs-number">0</span>))
</div></code></pre>
<ul>
<li>This looks OK, but <strong>how would we know it worked?</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Check properties</p>
<ul>
<li>
<p><strong>ASK LEARNERS HOW THEY COULD VERIFY THE FUNCTION WORKED AS INTENDED</strong></p>
</li>
<li>
<p>We can <strong>check properties of the original and centred data</strong></p>
<ul>
<li><code>mean</code>, <code>min</code>, <code>max</code>, <code>std</code></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>print(<span class="hljs-string">'original min, mean, and max are:'</span>, numpy.min(data), numpy.mean(data), numpy.max(data))
</div></code></pre>
<ul>
<li>We'd expect the <strong>mean of the new dataset to be approximately <code>0.0</code></strong></li>
<li>Also, the <strong>range (<code>max</code> - <code>min</code>) should be unchanged.</strong></li>
</ul>
<pre class="hljs"><code><div>centred = centre(data, <span class="hljs-number">0</span>)
print(<span class="hljs-string">'min, mean, and max of centered data are:'</span>, numpy.min(centred),
      numpy.mean(centred), numpy.max(centred))  
</div></code></pre>
<ul>
<li>The limits seem OK, but has the <em>shape</em> of the data distribution changed?</li>
<li>The <strong>variance of the dataset should be unchanged.</strong></li>
</ul>
<pre class="hljs"><code><div>print(<span class="hljs-string">'std dev before and after:'</span>, numpy.std(data), numpy.std(centred))    
</div></code></pre>
<ul>
<li>
<p>The range and variance are as expected, but the mean is not quite <code>0.0</code></p>
</li>
<li>
<p><strong>The function is probably OK, as-is</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Documenting functions</p>
<ul>
<li>
<p>We can document what our function does by <strong>writing comments in the code</strong>, and this is a good thing.</p>
</li>
<li>
<p>But Python allows us to <strong>document what a function does directly in the function</strong> using a <em>docstring</em>.</p>
</li>
<li>
<p>This is a string that is put in a <strong>specific place in the function definition, and it has special properties that are useful</strong>.</p>
</li>
<li>
<p>To add a docstring to our <code>centre()</code> function, we add a string immediately after the function declaration</p>
</li>
<li>
<p><strong>ADD DOCSTRING TO EXISTING FUNCTION AND RUN CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">centre</span><span class="hljs-params">(data, desired)</span>:</span>
    <span class="hljs-string">"""Returns the array in data, recentered around the desired value."""</span>
    <span class="hljs-keyword">return</span> (data - numpy.mean(data)) + desired
</div></code></pre>
<ul>
<li>
<p><strong>RESTART KERNEL AND RUN ALL</strong></p>
</li>
<li>
<p>This documents the function directly in the source code, and it also <strong>hooks that documentation into <code>Python</code>'s <code>help</code> system.</strong></p>
<ul>
<li>We can ask for help on any function using the <code>help()</code> function:</li>
</ul>
</li>
<li>
<p><strong>built-in</strong> functions</p>
</li>
</ul>
<pre class="hljs"><code><div>help(<span class="hljs-keyword">print</span>)
</div></code></pre>
<ul>
<li><strong>functions from modules</strong></li>
</ul>
<pre class="hljs"><code><div>help(numpy.mean)
</div></code></pre>
<ul>
<li>and <strong>if you write it</strong> your own functions</li>
</ul>
<pre class="hljs"><code><div>help(centre)
</div></code></pre>
<ul>
<li>
<p><strong>SHOW LEARNERS HOW DETAILED THE BUILTIN AND NUMPY HELP IS</strong></p>
</li>
<li>
<p>Using the triple quotes (&quot;&quot;&quot;) allows us to use a multi-line string to describe the function:</p>
</li>
<li>
<p><strong>ADD EXTRA DOCUMENTATION</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">centre</span><span class="hljs-params">(data, desired)</span>:</span>
    <span class="hljs-string">"""Returns the array in data, recentred around the desired value.
    
    Example
    -------
    &gt;&gt;&gt; centre([1, 2, 3], 0)
    [-1, 0, 1]
    """</span>
    <span class="hljs-keyword">return</span> (data - numpy.mean(data)) + desired
</div></code></pre>
<ul>
<li><strong>DEMONSTRATE THE CHANGE</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Default arguments</p>
<ul>
<li>So far we have named the two arguments in our <code>centre()</code> function
<ul>
<li>We need to specify both of them when we call the function</li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div>centre([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], <span class="hljs-number">0</span>)
array([<span class="hljs-number">-1.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">1.</span>])

centre([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-13</span><span class="hljs-number">-9131</span>fef8e3dc&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> centre([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])

TypeError: centre() missing <span class="hljs-number">1</span> required positional argument: <span class="hljs-string">'desired'</span>
</div></code></pre>
<ul>
<li>We <strong>can set a <em>default</em> value for function arguments</strong> when we define the function</li>
<li>Set defaults <strong>by assigning a value in the function declaration</strong>, as follows:</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">centre</span><span class="hljs-params">(data, desired=<span class="hljs-number">0.0</span>)</span>:</span>
    <span class="hljs-string">"""Returns the array in data, recentred around the desired value.
    
    Example
    -------
    &gt;&gt;&gt; centre([1, 2, 3], 0)
    [-1, 0, 1]
    """</span>
    <span class="hljs-keyword">return</span> (data - numpy.mean(data)) + desired
</div></code></pre>
<ul>
<li>The change we've made is to set <code>desired=0.0</code> in the function <em>prototype</em>.</li>
<li>Now, by default, the function will recentre the passed data to zero, without us having to specify that:</li>
</ul>
<pre class="hljs"><code><div>centre([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Create a new notebook</p>
<ul>
<li><strong>New notebook called <code>testing</code></strong></li>
<li><strong>ADD AN INTRO IN MARKDOWN</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section"># Testing and Documentation</span>

When writing a function, we should

<span class="hljs-bullet">* </span>test output for correctness
<span class="hljs-bullet">* </span>document the expected function
</div></code></pre>
<ul>
<li><strong>ADD IMPORTS</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> numpy
</div></code></pre>
<ul>
<li><strong>Write the test function</strong></li>
<li>When doing some analyses, such as PCA, we might want to recentre and normalise our dataset.</li>
<li>Let's write a function to recentre an array of data, like the inflammation data.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">centre</span><span class="hljs-params">(data, desired)</span>:</span>
    <span class="hljs-keyword">return</span> (data - np.mean(data)) + desired
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Exercise 10 (10min)</p>
<ul>
<li><strong>MOVE SLIDES TO THE SCREEN</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">rescale</span><span class="hljs-params">(data)</span>:</span>
    <span class="hljs-string">"""Returns input array rescaled to [0.0, 0.1]."""</span>
    l = numpy.min(data)
    h = numpy.max(data)
    <span class="hljs-keyword">return</span> (data - l) / (h - l)
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<p><strong>SLIDE</strong> Errors and exceptions</p>
<ul>
<li><strong>MOVE NOTEBOOK TO THE SCREEN</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Create a new notebook</p>
<ul>
<li><strong>Call the notebook <code>errors</code></strong></li>
<li><strong>ADD AN INTRO</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section"># Errors and Exceptions</span>

<span class="hljs-code">`Python`</span> provides useful error reports of what has gone wrong, which can help with debugging.
</div></code></pre>
<hr>
<h2 id="section-15-errors">SECTION 15: Errors</h2>
<hr>
<p><strong>SLIDE</strong> Create a new notebook</p>
<ul>
<li><strong>Call the notebook <code>errors</code></strong></li>
<li><strong>ADD AN INTRO</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section"># Errors and Exceptions</span>

<span class="hljs-code">`Python`</span> provides useful error reports of what has gone wrong, which can help with debugging.
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Errors</p>
<ul>
<li><strong>Programming is essentially just making errors over and over again until the code works</strong> <img class="emoji" alt="wink" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAUTElEQVR4Xu2bC5Bc5ZXff+f7bvft7ul5ajQzkiyeQhgwLoyEwDLW8lpjmzJrLDB4Bcs6OKFcduXhlDe76ySYSirZmMRxOcEbb8Xx2oYiZcfLw/YuZsHlzQowIDDGa0sIvUASaCTN89Gve7/vZG73V3WrNKNXEWGqdm/pr3Nnuqf7/P7f+c70uT0tqsrf58Pw9/r4BwP+wYDoVAPcLWJuvZWzIuVCDBeIsEpgxFjpQ6kAINS800mFA6rswPOrVPjlffex6y5Vzyk8TkkTFBHZfRvrVLi+YPmAKcj5tmAqpmgwRUGMgBWAXE5Rr/hWJo9LfM0n+uvE8Zgoj5z5HZ5VVX1bG/D89VJZ0sfHjeUfFUvmfbZsjKlYTJyBK2I8YhWxAnKEAaqoyySoN/iW4JseX3O4uvethn/SO/7X2CTfXfOI1t5WPeCnV0q05/fk94eXyjOVHvvNrpH4/fGK2MTLI+KlSnGppTgySGnVRcTvupZ4ze9RuuzTlNf/s0zZefa97LbsPtl9s59p/2z2GNljZY+ZPXb2HNlzZc/5tqiA7ZtkXanAfyhV7dVRb0TUY5HYYUoRUd9KzMh7MMNrkOoqpDQAUQXEggBoABBQQB2kNbQxjs7uwI8+jz/wc9LJvfhGijYt6bQjnUppzLonGgl/vPp+ffY3YoCIyK5NfK5UkbuL/YUu21cgqnhMJSIavhB7+gcwS9dBeSDApYCHYDgCKIucC2BAIhCgPo4/9Czu1cdIR3+Jr6WkNYObTGhNJHONmt511v18WVX11BsQwLfcRM/SMv+91G1vLQwWiXottuyIhlZjV23EDF0GUQm0BeoQMQAnLVUfqqUIaQN/8Ge4Hd8nPbgdV7ekU47kcIvGjLvvUJ3Prv0e08GIU2BAgH/hepYNDHB/pTe6ojBcJOoWoup8PPtazBkbkbgPfAOBhY1OTpSchQ0SwJTQ5iR+z7wJO39MOtsinVGS0Ra1qfSn4+NsuvgR3jgZE6KThR8c4KHSksIl8dIY2w1Rfz/ReZ/ADL8fNEHSKRA5FtjJS4N3aROsxa7ahHSfhmx9ADETGFOCqHmFIXloPsePisgJmxCdKPyj19I/D/9AG34kgxcK/UuILrgD6T8PcVOALNzbvHmRoyAKUMMMraNQ6EZ+9Q2wY8Q2BrhkkOSB+VxvEJGJEzEhOhF4wLxzhK+W+qMN8VCM7THz8H1E592G6TkDkgkQk8NzygzIK8LVkZ4ziM6/DbZ+C2SS2MfgdcM7Nf0qcLuI+OOZEJ0I/PZb+Vy5x24qDBWJ+ixR93w86zqkuhLSyQ68njTwmzckbWQ5tHNh+/9BaOF9kXKqm7bf6n6x+j6+nJtwUk0wh3/qJtac0S8/Ka0odRWXxkQ9EK28HLPiGiAFEYQc/i2TBh9UgQi//3HSvZtJp6F1qEljf2Nuz4Retf57PA8c1YToWPC3DVNa0c098ZJCV6G/QFQ12P4RzOB7wM8BigT634QBgnb4kXZOdnYX+ANoWkAbrmtF2rpnnuHD3xmlkVfCiW0BAcwXruHmctVuiObhbbWAKRvMkneBNeBqiLCw4xuByIAx4BwknlN5iAYTbIRZciFaO4RNhajfUZ5zG75wjbv5O/fzHUCB4xmQr/4fraOnK5Y/aMN3z6skmOogUhkBN4uIggpIDk4c4WabvLZrgomJGstGeubVC/oWVIIXpDLcztEmh/DdhbYJXbP+D/5onT78H59lSkQ0O45XAQawn1jFxrjHnhv1RJjyvGKDVFeAKOJr+cpDG7xVT3j8L7fx2BNb2bd/jNFDCeeeP8K992wkLgBeT30lSNTO0dTG2jlnucc96bmfWJVunDfgW4ACbnED8tWXSweIu0tyRzbYmK4IWzJIHCOlXsTXAZ+vfLnAnldG+dP/+RQ7tr9ByULZwNUfuoQbfve3iYtT0AqGnfKekECWYxxjkya+qzOcdU+7Oy4d0P/9zDhOQhkcrQIEsH+ygYvLFVlrqxGmZDFFgxTLiInA1UEUAEoRLz23l6987UlcvcZIFfqXD3PdJ2/kvetXwfQemBznLeuQKlmO7VxNMWnnnjGUK8naP9mgF1/5EE8DHjiqAQaww1VzfaFqjalYbNEikYEoBlLQBBSILa9sHeW/3vskBdeiK4Z3rnsXN3/mdxiszMGrfwvegVje2kPauUpk2rm7iiVjGa5yPfhnAQf43IAjmt9Z/RTKJb1S2ldyLFIwSCQYG4FvAh6sMDOe8qffeB6TNCkX4NLrLuOm29dTmNoO+6bAWEBAkzc3DRkBm/8sXsEpRz9MO1cfSZZ7h6FiKZfSKzO2XROk+TaA6IjszF1rOCsuybm2bJGixWQGWAu4jgHqoWh55C93cGD/JP1l4fIbLuHG3303cuBX0EzAGPA+h1EFfIj51zmoAAZEgKCiBWOoTyeMT7ZopZ7IGnq7I3p6i1AwkHpIFZT8EAM4xGa5a5shY8mY7lqjZ93+OFsD66IG2JXdXBjFpmxig4kEwvU7tAm+BtYwcaDF5mfeIDZw6Ycu4Mabz0b2bYUkBfGQuLBVXC4UNIcOMReSx4Jh9/aUB5+YZfuuOrNzLdJUiaxQqUQMLS1z0fl9rF8zwPJ3lHMjREC1k6t0cs8YMpaMaWW3vxDYHlhZtAL6yuZ8GwtSEMQaxEimDlA6A4UKv94xxf59dd531XJu2XQasncrtOqAJ4dVsAJGIM1X+rjbIVJe29fgn/67/dRmPEO9UC4KZSOIgp9NeW2qwcsvj/Pwj/dxxXsHueUjI3R1R9AM8JqEvANDQciYMjbwDx7NAJMpjvRsiUwHvg0QShMgnYM0ZbZRZ2hVN7//qWUUD++AegJGcrBMscwDOGbmHMNLC4CC4/iHh1JfietvP52eLkN/b4QBGnXH9FiTw280GJvX+GiTqemEB3+4n5e2TfHHdy5neNBC2gppdHIXG0yIDHGUnk3gzA3IG2AmWxCGCKUvEuAxecXWGrzvvV2svXYpSxpzMJt2TIJcsfDci3W+9sAY41Mpl1/cxWc3LaEcm+M0MMDBUI/wjz/eD0bAeVDAGjCmHWeb8MaBhF+/NM0LT47xs6cn+dKf7eVLn1+OBdCAI77DYAUioc0GFpDQCPXILVCwEX0S9j0WhHzqEhFQqLoW1akEGg7C98gtZfRAwr33HcI1Pct7hM3PzjDQY7njlgFwx5mbBWiksGtiYasQAYFq0XJOtcA5H+zhwx9ewksv13l9dw2vikFBAw4QcMmYMjagcMweYISSmACuHYkqCKgG0qYLCYXbyJmIDH+7ZQ5tec4ethQsdBWFLS/NccM13Qz0WXCeYx6FMFAFBjTIK6QKzbSz7Q7WKBQMa4ZKrFleQkfr4IPBwYiQOmIgYwPMYgbkI42AoqC5A6oeNG8FqB790peD3ftaDFaF3pIQhSqaGfe8eiBhYFCOvg0EKAoHDyT8fFuTvW+ktBKlFAsjSyynLStwxooC1V4LTdC2IQ4dnQUCJcAR+UOHSQQIBgSFLZCjGOdp4AjQDlVB1ELgFQI/CrLYFTCl2XSUCkIUQWQgLoBVqCcpRBYSPerK//AnNR54ZJpGwxNbwRggLLwHenssV6yrcONvd1GMQB0ghDwdCqCBTl1H3oODjC0YoEELZ4HUM63eoy5FnYAGMyQgquYOSyYFyX3NiKs9QmMchNzeYlGodDugCWYRA2LhxZcS/vx7MyytCmcOWApWEMB7SB2kqkzWPPfPG5SmKbdvrKD1fBEUyRRyBNrgSWDxZGzHuh6gAM2Uw23HvEPVoN4geNDAIpqbQG53EFIUzjhb2Lc99ypJodxleMfpHjQFu/jq759IoQVdVjCJoA4oQLEsFIH6LJSlc3sNDyYBUURBQwKo5LvAK+pdYPFtNkAWDEOqqiKiAFMteXV5oqhT8CFhL2joSaEroqGKJG8pIAotuGy94ZnNwtSMUqkIYxPKez5gGRxKYNovfhUigQ1XW8Z9kbkxZdk7DMtONwwuM3R1CSIwNQk7tzkS4Lcusuh0K/BKLhWAYH6HQVNFE22zgRKQdbEKSF+d9jvPbVm8U7z3GDUIeZmDzw20igpgFAlRHYwMejbeafnBnzsOTinnXG74nZvbTWBxeAAP3dZx2+02zBIKjRTqCi0BhaE+OOcaA17gQBOvIEbACQiAhJ/N56aMoc3SgowNcEcbhz2QPvkGu64+xzdIfEmdQb0HJKy0gnhCFYDREMkjClOw9nzDOfcIMzVlxYBHJjz4Y7whLyG1/SkcOStp6EVzwISEkULAhhgEuRE4UB8qOfW4pm9kbEAC+KMZkHz7V+z73CXsLDX1Ak1DCWEQQKwG+I5UFJGwFQjwoRIY8/SWhd4icCjA2xObgPGQw4WlVEAEvCKmE1VlkbFCwz86uSeKbyqzdXZmbMcyQIHmXEIyOi0/W5IZkAA+CECCwrkEkccgCf1AIQWM5FVytEMW/SIHVMk5NSgvkMWrKQXNVFcyprmkTdRcuAXyRpgA9cf3+s2rV5pPRg01rgWmpKCSQwIsAFcwi8Vc5ATHdkE0h1QW0qmCLGYSiIJXwCkuBW0oaUN9xgTUgeRY1wQ9UPvyc2y75QL9u+EB/27bEnxisLHkqwsBUDpRJC99EfIIxAoecDnfCb17XAyxmYMucD/vD2GBQn9w4FNFmx5X94xP6d9lTEAtMBKEWcSA+nRC/cXX9SGd9W0Hw65BfRgsDGHezsubcI7NY+rhF78QZmaAKhATbl9EEmIMdMH+/bBtW3g8WfjY2JBDiCIAEswOpd9UdMaTsWRM0JZf/IVQvg3qwPQXNvM3l670ewZ6/RmmLJgySNGADSsvRyQOebJ07qMG/sv/gFbd8IkblfdvUAaGFOwRXd6E2IK9rwqPPiZ890Hh6quVP7xQYS6AIWDzczSIjtSBOkFbHl/3uBnP1ITfk7EA00D9RN4YSYGZnVPMPL1Xv/3BPv9vbZfBl8HEYVKzC1YuSIMBAqIUeuDjtwhf+0/Ct78p/OiHyup3wurVyvCI0l0F72FyGl7fJ2zbKux6BSYnhd4K3HBTMMnk2wYfzo2A70jIzzUB3wA3q7hJT8aQsUBb6XHfGgtVMAtMfvoJ/uZny/wLy7rdxVLpVIEpGLCC2ABvFyllQqzDh66HHVth62ah7IVtz8OLz4TJzIam5bModMXQH0PUBdd/Sjn3AmAsbDGVvH9IvvJIAM+UQtj3pFOO0cP+hYwBmARmT+bN0SYwOdWg9+sv6r3/qsfdK2VTklgoRB5jDUQgEpLLTQhH3hhtotzxL4Svz8LBl4XTh0BVcD50a8CajtRnTwpXbYSP3KQwAdh85DwSGhVwgiqoA9/wJHNKOuVpjLtGlvs8w3QwoHnCfygZnJoGxr6yhZ3P7JZvuDGHn/T4uU531QTU50lhJC9NMcEAoCV0F5R/cpewej005qCg0FuCgUpH1RhIoJXAFZvgljsVmVHQ/DcPmEVfdKink0ujk5uf8mS5ZjlnuQNjwPRJ/X1AUAsYByoffdA//Fy3nLOqkH6AQgRiMEYwUcjHCPmrN8J/ku/fmtJTVj75h8LTPxFe+CuY2q+oAwBTgpELhcs/Cue9W2FcIZX8MTTEAI3PFEq+Bb4OfkZJJj2tQyk79/rHPvqgPgwcDgwtgJMwIO8FwYTybT/UP3toox8atu6icOkesQZBUNF2BPIVQ4E8UAPbUi6/Ctb9lnBgn2H8INgIli6HkRGFROGQdgABNI8dcPKybwEtQWuKn/YkE/M66Di437+Y5QpMBPiw90/SgGCCE5FJoLBtnPhTj+qXvnGd+zdDcB4hJ/WCcQZioAASCRjNO7fX3JCUNmAxgtOG5rUCIEx7hzXv8MrC1c9XHRJBm+DrPlv5DvxoBu+2ZjnO53oAOAhMZgxv+g8lRaQbGAZWXL6S5V+/Vj6//DTznsJIhO01RN2CdBkkBikqUgAsYWgKEV10aAFAcmAEAngQ4ATCXtdU0DpozZPOKG7KkxxIeX2v//mdj+p/3ryPfcDrwKiqzhyPzX7xi1/keMf8fVp33323AvraNPrXO3n+qmH6ekTPljAgSpjYRAXV8PtZj1hRAhhHkQZ5E6Cls9qZWgINOk142pNOKW4sg3fs2OP/+qaH9asvjrbBDwCHVXXq//cnRiYDBa9MoWu/pf/t+x/TnevPTj5ZrtmSX2KxTcFWDVJSJBakCOJArED+snnh0KeEGJQS5nlCo1O0qWgd3JzHTSvpuKM+5hpP7ZRvbvwL/auQ3yhwKJwT9OYrIFQB81XQzN9fx3x3q+5LmmxZXdbhitdlGm7JYijbcG8JF1iDfF7m+EwEaIFU0FYm0IaiNfCz4GZ8p9zHPOmoy0r+ha88pff8y5/os8BYgD8MTKmqntK/Fge6gSVB/WVL970fZP0VZ8rH+gbNmVlfsN0GUxGkLNgiUJTQG8iHqLwCwCsaDOtM7YprgdYVX1PcbMeAycN+909361985lGeqjtmQrcfC5oJ8G/J5wWqQC/QD/QBPSuqVP/9Fax970q5dkm/XBhVjWQm2IrJt0Qhn+aMAQAfwNEwwbU60dV8Gz6d9To2rr98ep/++F//lC37Z5mF8AoPJsKqz77lnxgRkThUQw/QF86rQPTP13LmdeeYtWf269pqN2cUyyY2sUBBkAhMlFcAGub3FAiXsFp135ydYc/uCdnyo1f8lq9sYTeQQht+JsBPh1Vv/sY+MiMiBigH+CAqQBcQWzAfWc3QhpWsOHeJWTlY0eWVAgNxRLVgiQESR7OZMltLGD9ck9dfHvN7/+9e9v9gOwcdeKAJzAG1AB9EXVX92+JTYyISBSO6girh6xJQDLJBPo8AGMARYlArqAHUA/xcpgCevi0/NxiMiIFSUDnA5yaACZFcOMDn8B0F+EZQcwH428qAhb8tCkcoCjEYkHeB3AASIO3EXAu6+9vcgMV7xcJrSeRCAR/kwt4+5cf/A7W3fHLOU5gcAAAAAElFTkSuQmCC" />
<ul>
<li>The key skill is <strong>learning how to identify, and then fix, the errors</strong> when they are reported.</li>
<li><strong>All programmers</strong> make errors.</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Traceback</p>
<ul>
<li>
<p><code>Python</code> tries to be helpful, and provides extensive information about errors</p>
<ul>
<li>These are called <em>tracebacks</em></li>
</ul>
</li>
<li>
<p><strong>We'll induce a traceback, so we can look at it</strong></p>
</li>
<li>
<p><strong>ENTER CODE IN A CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">favourite_ice_cream</span><span class="hljs-params">()</span>:</span>
    ice_creams = [<span class="hljs-string">"chocolate"</span>,
                  <span class="hljs-string">"vanilla"</span>,
                  <span class="hljs-string">"strawberry"</span>]
    print(ice_creams[<span class="hljs-number">3</span>])
</div></code></pre>
<ul>
<li><strong>NEW CELL</strong></li>
</ul>
<pre class="hljs"><code><div>favourite_ice_cream()
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Anatomy of a traceback</p>
<pre class="hljs"><code><div>---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-4</span><span class="hljs-number">-8</span>f18c934933f&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> favourite_ice_cream()

&lt;ipython-input<span class="hljs-number">-3</span><span class="hljs-number">-3</span>f8910a0f7ad&gt; <span class="hljs-keyword">in</span> favourite_ice_cream()
      <span class="hljs-number">3</span>                   <span class="hljs-string">"vanilla"</span>,
      <span class="hljs-number">4</span>                   <span class="hljs-string">"strawberry"</span>]
----&gt; <span class="hljs-number">5</span>     print(ice_creams[<span class="hljs-number">3</span>])

IndexError: list index out of range

</div></code></pre>
<ul>
<li>
<p><strong>TALK THROUGH THE TRACEBACK IN THE NOTEBOOK</strong></p>
<ul>
<li>The <em>stack</em> of all steps leading to the error is shown</li>
<li>The steps are separated by lines starting <code>&lt;ipython-input-1…</code></li>
<li>The steps run in order from top to bottom</li>
</ul>
</li>
<li>
<p>The first step has an arrow, showing where we were when the error happened. We were calling the <code>favourite_ice_cream()</code> function</p>
</li>
<li>
<p>The second step tells us that we were <em>in</em> the <code>favourite_ice_cream()</code> function</p>
<ul>
<li>The second step also points to the line <code>print(ice_creams[3])</code>, which is where the error occurs</li>
<li>This is also the last step, and the precise error is shown on the final line: <code>IndexError: list index out of range</code></li>
</ul>
</li>
<li>
<p>Together, this tells us that we have made an index error in the line <code>print(ice_creams[3])</code>, and by looking we can see that we've tried to use an index outside the length of the list.</p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Syntax errors</p>
<ul>
<li>
<p><strong>The error you saw just now was a <em>logic error</em></strong> - the code was valid <code>Python</code>, but it did something 'illegal' when it ran</p>
<ul>
<li><strong>We have to run the code to see the error</strong></li>
</ul>
</li>
<li>
<p><strong><em>Syntax</em> errors occur when the code is not interpretable as valid <code>Python</code></strong></p>
<ul>
<li><strong>The error is reported before the code runs</strong></li>
</ul>
</li>
<li>
<p><strong>ENTER CODE IN A NEW CELL - NOTE THE EXTRA SPACE AND LACK OF COLON!</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">some_function</span><span class="hljs-params">()</span>
    <span class="hljs-title">msg</span> = "<span class="hljs-title">hello</span>, <span class="hljs-title">world</span>!"
    <span class="hljs-title">print</span><span class="hljs-params">(msg)</span>
     <span class="hljs-title">return</span> <span class="hljs-title">msg</span>
</span></div></code></pre>
<hr>
<p><strong>SLIDE</strong> Syntax traceback</p>
<pre class="hljs"><code><div>  File <span class="hljs-string">"&lt;ipython-input-6-bef8c18baffa&gt;"</span>, line <span class="hljs-number">1</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">some_function</span><span class="hljs-params">()</span>
                       ^
<span class="hljs-title">SyntaxError</span>:</span> invalid syntax
</div></code></pre>
<ul>
<li>
<p><code>Python</code> tells us there's a <code>SyntaxError</code> - the code isn't written correctly</p>
<ul>
<li><strong>We don't get the chance to run the code</strong></li>
</ul>
</li>
<li>
<p>It points to the approximate location of the problem with a caret/hat (<code>^</code>)</p>
<ul>
<li>We can see that we need to put a colon at the end of the function declaration</li>
</ul>
</li>
<li>
<p><strong>FIX THE CODE IN PLACE</strong></p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Fixed?</p>
<ul>
<li><strong>SHOW AND RUN FIXED CODE</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">some_function</span><span class="hljs-params">()</span>:</span>
    msg = <span class="hljs-string">"hello, world!"</span>
    print(msg)
     <span class="hljs-keyword">return</span> msg
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Not quite</p>
<pre class="hljs"><code><div>  File <span class="hljs-string">"&lt;ipython-input-7-b32ba7f38b6b&gt;"</span>, line <span class="hljs-number">4</span>
    <span class="hljs-keyword">return</span> msg
    ^
IndentationError: unexpected indent
</div></code></pre>
<ul>
<li>
<p><code>Python</code> now tells us that there's an <code>IndentationError</code></p>
</li>
<li>
<p>We don't learn about all the syntax errors at one time - <code>Python</code> gives up after the first one it finds</p>
<ul>
<li><strong>(fixing the first error in a file might correct all subsequent errors)</strong></li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Name errors</p>
<ul>
<li>
<p>If you try to use a variable that is not defined in <em>scope</em>, you will get a <code>NameError</code></p>
<ul>
<li>This often happens with typos</li>
</ul>
</li>
<li>
<p><strong>ENTER CODE IN A NEW CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>print(a)
</div></code></pre>
<ul>
<li>We have a <strong>NAME ERROR</strong></li>
</ul>
<pre class="hljs"><code><div>---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-5</span>-c5a4f3535135&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
----&gt; <span class="hljs-number">1</span> print(a)

NameError: name <span class="hljs-string">'a'</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined
</div></code></pre>
<ul>
<li><strong>This is true in functions/loops, too</strong>
<ul>
<li><strong>ENTER CODE IN A NEW CELL</strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
    count = count + i
</div></code></pre>
<ul>
<li><strong>This still gives us a name error</strong></li>
</ul>
<pre class="hljs"><code><div> ---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-6</span><span class="hljs-number">-15</span>ebe951e74d&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
      <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">3</span>):
----&gt; <span class="hljs-number">2</span>     count = count + i

NameError: name <span class="hljs-string">'count'</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Index errors</p>
<ul>
<li>
<p>If you try to access an element of a collection that does not exist, you'll get an <code>IndexError</code></p>
</li>
<li>
<p><strong>ENTER CODE IN NEW CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div>letters = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>]
print(<span class="hljs-string">"Letter #1 is"</span>, letters[<span class="hljs-number">0</span>])
print(<span class="hljs-string">"Letter #2 is"</span>, letters[<span class="hljs-number">1</span>])
print(<span class="hljs-string">"Letter #3 is"</span>, letters[<span class="hljs-number">2</span>])

Letter <span class="hljs-comment">#1 is a</span>
Letter <span class="hljs-comment">#2 is b</span>
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-9</span><span class="hljs-number">-62</span>bced7460d2&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
      <span class="hljs-number">2</span> print(<span class="hljs-string">"Letter #1 is"</span>, letters[<span class="hljs-number">0</span>])
      <span class="hljs-number">3</span> print(<span class="hljs-string">"Letter #2 is"</span>, letters[<span class="hljs-number">1</span>])
----&gt; <span class="hljs-number">4</span> print(<span class="hljs-string">"Letter #3 is"</span>, letters[<span class="hljs-number">2</span>])

IndexError: list index out of range
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Exercise 11 (10min)</p>
<ul>
<li><strong>PUT SLIDES ON SCREEN</strong></li>
</ul>
<pre class="hljs"><code><div>message = <span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> number <span class="hljs-keyword">in</span> range(<span class="hljs-number">10</span>):
    <span class="hljs-comment"># use a if the number is a multiple of 3, otherwise use b</span>
    <span class="hljs-keyword">if</span> (number % <span class="hljs-number">3</span>) == <span class="hljs-number">0</span>:
        message = message + <span class="hljs-string">"a"</span>
    <span class="hljs-keyword">else</span>:
        message = message + <span class="hljs-string">"b"</span>
print(message)
</div></code></pre>
<p><img src="images/red_green_sticky.png" alt="progress check"></p>
<hr>
<h2 id="section-16-defensive-programming">SECTION 16: Defensive programming</h2>
<hr>
<p><strong>SLIDE</strong> (Un)readable code</p>
<ul>
<li>
<p>What does this function do?</p>
</li>
<li>
<p><strong>GIVE LEARNERS A COUPLE OF MINUTES TO TRY TO WORK IT OUT</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">s</span><span class="hljs-params">(p)</span>:</span>
    a = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> p:
        a += v
    m = a / len(p)
    d = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> p:
        d += (v - m) * (v - m)
    <span class="hljs-keyword">return</span> numpy.sqrt(d / (len(p) - <span class="hljs-number">1</span>))
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Readable code</p>
<ul>
<li>
<p>What does this function do?</p>
</li>
<li>
<p><strong>GIVE LEARNERS A COUPLE OF MINUTES TO TRY TO WORK IT OUT</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">std_dev</span><span class="hljs-params">(sample)</span>:</span>
    sample_sum = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> sample:
        sample_sum += value

    sample_mean = sample_sum / len(sample)

    sum_squared_devs = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> sample:
        sum_squared_devs += (value - sample_mean) * (value - sample_mean)

    <span class="hljs-keyword">return</span> numpy.sqrt(sum_squared_devs / (len(sample) - <span class="hljs-number">1</span>))
</div></code></pre>
<ul>
<li>
<p><strong>This is the same code as in the previous slide</strong></p>
<ul>
<li>sensible function name</li>
<li>sensible variable names</li>
<li>blank lines to separate code blocks</li>
</ul>
</li>
<li>
<p><strong>Even without comments/documentation it's readable</strong></p>
</li>
<li>
<p><strong>FIRST LINE OF DEFENCE: sensible names, and documentation</strong></p>
<ul>
<li>But that's not all you can do to make your life easier.</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Create a new notebook</p>
<ul>
<li>
<p><strong>Call it <code>defensive</code></strong></p>
</li>
<li>
<p><strong>ADD INTRO IN MARKDOWN</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section"># Defensive Programming</span>

<span class="hljs-emphasis">*Defensive programming*</span> is the practice of expecting your code to have mistakes, and guarding against them.
</div></code></pre>
<hr>
<p><strong>SLIDE</strong> Defensive programming</p>
<ul>
<li>
<p>So far <strong>we have focused on the basic tools</strong> of writing a program: variables, lists, loops, conditionals, and functions.</p>
<ul>
<li>We haven't looked very much at whether a program is getting the right answer (and whether it continues to get the right answer as we change it).</li>
<li><strong>It's all very well having some code, but if it doesn't give the right answer it can be damaging, or worse than useless</strong></li>
</ul>
</li>
<li>
<p><strong>Defensive programming</strong> is the practice of expecting your code to have mistakes, and guarding against them.</p>
<ul>
<li>To do this, we will write some <strong>code that <em>checks its own operation</em>.</strong></li>
<li>This is generally good practice, speeds up software development, and helps ensure that your code is doing what you intend.</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Assertions</p>
<ul>
<li><strong>ADD INTRODUCTORY TEXT</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-section">## Assertions</span>

Assertions are a pythonic way to see if a program's state is correct.

``python
assert <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">condition</span>&gt;</span></span>, "Some text describing the problem"
``
</div></code></pre>
<ul>
<li>
<p><strong>Assertions</strong> are a <code>Pythonic</code> way to see if code runs correctly</p>
<ul>
<li>10-20% of the <code>Firefox</code> source code is assertions/checks on the rest of the code!</li>
</ul>
</li>
<li>
<p><strong>We <em>assert</em> that a <em>condition</em> should be <code>True</code></strong></p>
<ul>
<li>If it's <code>True</code>, the code may be correct</li>
<li>If it's <code>False</code>, the code is <strong>not</strong> correct</li>
</ul>
</li>
<li>
<p>The syntax for an assertion is that we <code>assert</code> some <code>&lt;condition&gt;</code> is <code>True</code>, and if it's not, an error is thrown (<code>AssertionError</code>), with some text explaining the problem.</p>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Example assertion</p>
<ul>
<li>Type code <strong>then ask learners what it does</strong></li>
</ul>
<pre class="hljs"><code><div>numbers = [<span class="hljs-number">1.5</span>, <span class="hljs-number">2.3</span>, <span class="hljs-number">0.7</span>, <span class="hljs-number">-0.001</span>, <span class="hljs-number">4.4</span>]
total = <span class="hljs-number">0.0</span>
<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> numbers:
    <span class="hljs-keyword">assert</span> n &gt; <span class="hljs-number">0.0</span>, <span class="hljs-string">'Data should only contain positive values'</span>
    total += n
print(<span class="hljs-string">'total is:'</span>, total)
</div></code></pre>
<ul>
<li><strong>EXECUTE CELL</strong></li>
</ul>
<pre class="hljs"><code><div>---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-1</span><span class="hljs-number">-985</span>f50018947&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
      <span class="hljs-number">2</span> total = <span class="hljs-number">0.0</span>
      <span class="hljs-number">3</span> <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> numbers:
----&gt; <span class="hljs-number">4</span>     <span class="hljs-keyword">assert</span> n &gt; <span class="hljs-number">0.0</span>, <span class="hljs-string">'Data should only contain positive values'</span>
      <span class="hljs-number">5</span>     total += n
      <span class="hljs-number">6</span> print(<span class="hljs-string">'total is:'</span>, total)

AssertionError: Data should only contain positive values
</div></code></pre>
<ul>
<li>The <strong>traceback tells us there is an <code>AssertionError</code> and highlights which <em>assertion</em> failed.</strong>
<ul>
<li>The assertion is a check that the code <strong>behaves how <em>we</em> expect</strong></li>
<li>It can be valid Python, and not throw an error, but it might not be what we want</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> When do we use assertions?</p>
<ul>
<li>
<p><strong>Assertions are useful in three circumstances:</strong></p>
<ol>
<li><em>preconditions</em> - must be true at the start of an operation</li>
<li><em>postcondition</em> - something guaranteed to be true when an operation completes</li>
<li><em>invariant</em> - something always true at a particular point in code</li>
</ol>
</li>
<li>
<p><strong>PUT EXAMPLE CODE IN NEW CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalise_rectangle</span><span class="hljs-params">(rect)</span>:</span>
    <span class="hljs-string">"""Normalises a rectangle to the origin, longest axis 1.0 units."""</span>
    x0, y0, x1, y1 = rect
    
    dx = x1 - x0
    dy = y1 - y0
    
    <span class="hljs-keyword">if</span> dx &gt; dy:
        scaled = float(dy) / dx
        upper_x, upper_y = <span class="hljs-number">1.0</span>, scaled
    <span class="hljs-keyword">else</span>:
        scaled = float(dx) / dy
        upper_x, upper_y = scaled, <span class="hljs-number">1.0</span>
        
    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, upper_x, upper_y)
</div></code></pre>
<ul>
<li><strong>Test with some values - in the same cell</strong></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-comment"># Test function</span>
normalise_rectangle((<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">4.0</span>))
normalise_rectangle((<span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">6.0</span>))
</div></code></pre>
<ul>
<li><strong>DO ALL INPUTS MAKE SENSE?</strong></li>
</ul>
<pre class="hljs"><code><div>normalise_rectangle((<span class="hljs-number">6.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>))
normalise_rectangle((<span class="hljs-number">6.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">1.0</span>))
</div></code></pre>
<ul>
<li><strong>ASK LEARNERS WHAT SORT OF CHECKS WE NEED TO MAKE</strong></li>
<li>Examples:
<ul>
<li><strong>Input type</strong> - 4 values, all numbers</li>
<li><strong>x0 &lt; x1; y0 &lt; y1</strong> - lower left corner is identified first</li>
<li><strong>output values less than or equal to 1</strong> - correct result returned</li>
</ul>
</li>
</ul>
<hr>
<p><strong>SLIDE</strong> Preconditions</p>
<ul>
<li>
<p><strong>Preconditions</strong> must be true at the start of an operation or function</p>
<ul>
<li>Here, we want to ensure that <code>rect</code> has four values</li>
</ul>
</li>
<li>
<p><strong>MAKE CHANGE IN CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalise_rectangle</span><span class="hljs-params">(rect)</span>:</span>
    <span class="hljs-string">"""Normalises a rectangle to the origin, longest axis 1.0 units."""</span>
    <span class="hljs-keyword">assert</span> len(rect) == <span class="hljs-number">4</span>, <span class="hljs-string">"Rectangle must have four co-ordinates"</span>
    x0, y0, x1, y1 = rect
    
    dx = x1 - x0
    dy = y1 - y0
    
    <span class="hljs-keyword">if</span> dx &gt; dy:
        scaled = float(dy) / dx
        upper_x, upper_y = <span class="hljs-number">1.0</span>, scaled
    <span class="hljs-keyword">else</span>:
        scaled = float(dx) / dy
        upper_x, upper_y = scaled, <span class="hljs-number">1.0</span>
        
    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, upper_x, upper_y)
</div></code></pre>
<ul>
<li><strong>TEST FAILING INPUT AND SHOW ASSERTIONERROR</strong></li>
</ul>
<pre class="hljs"><code><div>normalise_rectangle((<span class="hljs-number">6.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">1.0</span>))

---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
&lt;ipython-input<span class="hljs-number">-10</span><span class="hljs-number">-6</span>da0caef5016&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()
      <span class="hljs-number">1</span> <span class="hljs-comment"># Test function</span>
----&gt; <span class="hljs-number">2</span> normalise_rectangle((<span class="hljs-number">6.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">1.0</span>))

&lt;ipython-input<span class="hljs-number">-9</span><span class="hljs-number">-7</span>b5bc166ed3d&gt; <span class="hljs-keyword">in</span> normalise_rectangle(rect)
      <span class="hljs-number">1</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalise_rectangle</span><span class="hljs-params">(rect)</span>:</span>
      <span class="hljs-number">2</span>     <span class="hljs-string">"""Normalises a rectangle to the origin, longest axis 1.0 units."""</span>
----&gt; <span class="hljs-number">3</span>     <span class="hljs-keyword">assert</span> len(rect) == <span class="hljs-number">4</span>, <span class="hljs-string">"Rectangle must have four co-ordinates"</span>
      <span class="hljs-number">4</span>     x0, y0, x1, y1 = rect
      <span class="hljs-number">5</span> 

AssertionError: Rectangle must have four co-ordinates
</div></code></pre>
<ul>
<li><strong>SHOW ANOTHER PROBLEM IN NEW CELL</strong></li>
</ul>
<pre class="hljs"><code><div>normalise_rectangle((<span class="hljs-number">6.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">-0.5</span>))
</div></code></pre>
<ul>
<li><strong>Ask learners what's going on</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Postconditions</p>
<ul>
<li>
<p><strong>Postconditions</strong> must be true at the end of an operation or function.</p>
<ul>
<li>Here, we want to assert that the upper x and y values are in the range [0, 1]</li>
</ul>
</li>
<li>
<p><strong>MAKE CHANGE IN CELL</strong></p>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalise_rectangle</span><span class="hljs-params">(rect)</span>:</span>
    <span class="hljs-string">"""Normalises a rectangle to the origin, longest axis 1.0 units."""</span>
    <span class="hljs-keyword">assert</span> len(rect) == <span class="hljs-number">4</span>, <span class="hljs-string">"Rectangle must have four co-ordinates"</span>
    x0, y0, x1, y1 = rect
    
    dx = x1 - x0
    dy = y1 - y0
    
    <span class="hljs-keyword">if</span> dx &gt; dy:
        scaled = float(dy) / dx
        upper_x, upper_y = <span class="hljs-number">1.0</span>, scaled
    <span class="hljs-keyword">else</span>:
        scaled = float(dx) / dy
        upper_x, upper_y = scaled, <span class="hljs-number">1.0</span>
        
    <span class="hljs-keyword">assert</span> <span class="hljs-number">0</span> &lt; upper_x &lt;= <span class="hljs-number">1.0</span>, <span class="hljs-string">"Calculated upper x-coordinate invalid"</span>
    <span class="hljs-keyword">assert</span> <span class="hljs-number">0</span> &lt; upper_y &lt;= <span class="hljs-number">1.0</span>, <span class="hljs-string">"Calculated upper y-coordinate invalid"</span>    
        
    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, upper_x, upper_y)
</div></code></pre>
<ul>
<li><strong>TEST FAILING INPUT TO SHOW ASSERTIONERROR</strong></li>
</ul>
<pre class="hljs"><code><div>normalise_rectangle((<span class="hljs-number">6.0</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">-0.5</span>))
</div></code></pre>
<ul>
<li><strong>This isn't our code's fault!</strong>
<ul>
<li>The problem is that the input values have the upper-right corner below the lower left corner</li>
<li><strong>We actually need to add another <em>precondition</em></strong></li>
</ul>
</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">normalise_rectangle</span><span class="hljs-params">(rect)</span>:</span>
    <span class="hljs-string">"""Normalises a rectangle to the origin, longest axis 1.0 units."""</span>
    <span class="hljs-keyword">assert</span> len(rect) == <span class="hljs-number">4</span>, <span class="hljs-string">"Rectangle must have four co-ordinates"</span>
    x0, y0, x1, y1 = rect

    <span class="hljs-keyword">assert</span> x0 &lt; x1, <span class="hljs-string">"Invalid x-coordinates"</span>
    <span class="hljs-keyword">assert</span> y0 &lt; y1, <span class="hljs-string">"Invalid y-coordinates"</span>
    
    dx = x1 - x0
    dy = y1 - y0
    
    <span class="hljs-keyword">if</span> dx &gt; dy:
        scaled = float(dy) / dx
        upper_x, upper_y = <span class="hljs-number">1.0</span>, scaled
    <span class="hljs-keyword">else</span>:
        scaled = float(dx) / dy
        upper_x, upper_y = scaled, <span class="hljs-number">1.0</span>
        
    <span class="hljs-keyword">assert</span> <span class="hljs-number">0</span> &lt; upper_x &lt;= <span class="hljs-number">1.0</span>, <span class="hljs-string">"Calculated upper x-coordinate invalid"</span>
    <span class="hljs-keyword">assert</span> <span class="hljs-number">0</span> &lt; upper_y &lt;= <span class="hljs-number">1.0</span>, <span class="hljs-string">"Calculated upper y-coordinate invalid"</span>    
        
    <span class="hljs-keyword">return</span> (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, upper_x, upper_y)
</div></code></pre>
<ul>
<li><strong>DEMONSTRATE THE ERROR THAT'S RAISED</strong></li>
</ul>
<hr>
<p><strong>SLIDE</strong> Notes on assertions</p>
<ul>
<li>
<p><strong>PUT SLIDES ON SCREEN</strong></p>
</li>
<li>
<p>Assertions help understand programs: they <strong>declare what the program should be doing</strong></p>
</li>
<li>
<p>Assertions help the person reading the program match their understanding of the code to what the code expects</p>
</li>
<li>
<p><em>Fail early, fail often</em></p>
</li>
<li>
<p><strong>Turn bugs into assertions or tests</strong>: if you've made the mistake once, you might make it again</p>
</li>
</ul>

</body>
</html>
